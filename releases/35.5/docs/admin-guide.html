<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="The INCEpTION Team">
<title>INCEpTION Administrator Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!-- Generate a nice TOC -->
<script src="https://code.jquery.com/jquery-3.0.0.js"></script>
<script src="https://code.jquery.com/jquery-migrate-3.1.0.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js"></script>

<!-- We do not need the tocify CSS because the asciidoc CSS already provides most of what we need -->

<style>
  .tocify-header {
    font-style: italic;
  }

  .tocify-subheader {
    font-style: normal;
    font-size: 90%;
  }

  .tocify ul {
    margin: 0;
  }

  .tocify-focus {
    color: #7a2518;
    background-color: rgba(0, 0, 0, 0.1);
  }

  .tocify-focus > a {
    color: #7a2518;
  }
</style>

<script>
    $(function () {
        // Add a new container for the tocify toc into the existing toc so we can re-use its
        // styling
        $("#toc").append("<div id='generated-toc'></div>");
        $("#generated-toc").tocify({
            extendPage: true,
            context: "#content",
            highlightOnScroll: true,
            hideEffect: "slideUp",
            // Use the IDs that asciidoc already provides so that TOC links and intra-document
            // links are the same. Anything else might confuse users when they create bookmarks.
            hashGenerator: function(text, element) {
                return $(element).attr("id");
            },
            // Smooth scrolling doesn't work properly if we use the asciidoc IDs
            smoothScroll: false,
            // Set to 'none' to use the tocify classes
            theme: "none",
            // Handle book (may contain h1) and article (only h2 deeper)
            selectors: $( "#content" ).has( "h1" ).length > 0 ? "h1,h2,h3,h4,h5" : "h2,h3,h4,h5",
            ignoreSelector: ".discrete"
        });

        // Switch between static asciidoc toc and dynamic tocify toc based on browser size
        // This is set to match the media selectors in the asciidoc CSS
        // Without this, we keep the dynamic toc even if it is moved from the side to preamble
        // position which will cause odd scrolling behavior
        var handleTocOnResize = function() {
            if ($(document).width() < 768) {
                $("#generated-toc").hide();
                $(".sectlevel0").show();
                $(".sectlevel1").show();
            }
            else {
                $("#generated-toc").show();
                $(".sectlevel0").hide();
                $(".sectlevel1").hide();
            }
        }

        $(window).resize(handleTocOnResize);
        handleTocOnResize();
    });
</script>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>INCEpTION Administrator Guide</h1>
<div class="details">
<span id="author" class="author">The INCEpTION Team</span><br>
<span id="revnumber">version 35.5</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#sect_installation">Installation</a>
<ul class="sectlevel1">
<li><a href="#_system_requirements">System Requirements</a></li>
<li><a href="#_install_java">Install Java</a></li>
<li><a href="#sect_home_folder">Application home folder</a></li>
<li><a href="#sect_database">Database</a>
<ul class="sectlevel2">
<li><a href="#_mariadb">MariaDB</a>
<ul class="sectlevel3">
<li><a href="#_prepare_database">Prepare database</a></li>
<li><a href="#_older_mariadb_versions">Older MariaDB versions</a></li>
<li><a href="#_jdbc_connection_options">JDBC connection options</a></li>
</ul>
</li>
<li><a href="#sect_mysql">MySQL</a>
<ul class="sectlevel3">
<li><a href="#_using_the_mysql_jdbc_driver">Using the MySQL JDBC driver</a></li>
<li><a href="#_jdbc_driver_options">JDBC driver options</a></li>
</ul>
</li>
<li><a href="#_hsqldb_embedded">HSQLDB (embedded)</a></li>
</ul>
</li>
<li><a href="#_running_via_embedded_tomcat_jar">Running via embedded Tomcat (JAR)</a>
<ul class="sectlevel2">
<li><a href="#_installing_as_a_service">Installing as a service</a></li>
<li><a href="#_loading_extra_java_libraries">Loading extra Java libraries</a></li>
</ul>
</li>
<li><a href="#sect_reverse_proxy">Running the behind a reverse proxy (JAR)</a>
<ul class="sectlevel2">
<li><a href="#_csrf_protection">CSRF protection</a></li>
<li><a href="#_apache_httpd_as_reverse_proxy">Apache HTTPD as reverse proxy</a>
<ul class="sectlevel3">
<li><a href="#_obtaining_a_lets_encrypt_certificate">Obtaining a Let&#8217;s Encrypt certificate</a></li>
</ul>
</li>
<li><a href="#_nginx_as_reverse_proxy">NGINX as reverse proxy</a>
<ul class="sectlevel3">
<li><a href="#_obtaining_a_lets_encrypt_certificate_2">Obtaining a Let&#8217;s Encrypt certificate</a></li>
<li><a href="#_putting_it_all_together">Putting it all together</a></li>
</ul>
</li>
<li><a href="#_caddy_as_a_reverse_proxy">Caddy as a reverse proxy</a></li>
</ul>
</li>
<li><a href="#sect_docker">Running via Docker</a>
<ul class="sectlevel2">
<li><a href="#_quick_start">Quick start</a></li>
<li><a href="#_storing_data_on_the_host">Storing data on the host</a></li>
<li><a href="#_settings_file">Settings file</a></li>
<li><a href="#_connecting_to_a_dedicated_database">Connecting to a dedicated database</a></li>
<li><a href="#_memory_and_other_java_options">Memory and other Java options</a></li>
<li><a href="#_customizing_uidgid">Customizing UID/GID</a></li>
<li><a href="#_application_arguments">Application arguments</a></li>
<li><a href="#sect_docker_compose">Docker Compose</a>
<ul class="sectlevel3">
<li><a href="#_upgrading_with_docker_compose">Upgrading with Docker Compose</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sect_kubernetes">Running via Kubernetes</a></li>
<li><a href="#sect_errors">Common issues and solution</a></li>
<li><a href="#_running_on_azure">Running on Azure</a>
<ul class="sectlevel2">
<li><a href="#_using_mysql_on_the_azure_cloud">Using MySQL on the Azure cloud</a></li>
<li><a href="#_using_a_mounted_azure_file_system">Using a mounted Azure file system</a></li>
</ul>
</li>
<li><a href="#_unsupervised_installation">Unsupervised installation</a></li>
</ul>
</li>
<li><a href="#sect_security_authentication">Authentication</a>
<ul class="sectlevel1">
<li><a href="#sect_security_authentication_oauth2">OAuth2 authentication</a></li>
<li><a href="#sect_security_authentication_saml2">SAML authentication</a>
<ul class="sectlevel2">
<li><a href="#_client_certificate_optional">Client certificate (optional)</a></li>
</ul>
</li>
<li><a href="#sect_security_auto_authentication_login">Auto-login</a></li>
<li><a href="#sect_security_authentication_preauth">External pre-authentication</a></li>
<li><a href="#sect_security_csp">Content Security Policy (CSP)</a></li>
</ul>
</li>
<li><a href="#sect_logging">Logging</a>
<ul class="sectlevel1">
<li><a href="#_set_specific_log_levels">Set specific log levels</a></li>
<li><a href="#_custom_logging">Custom logging</a></li>
<li><a href="#_logging_in_json_format">Logging in JSON format</a></li>
</ul>
</li>
<li><a href="#sect_monitoring">Monitoring</a>
<ul class="sectlevel1">
<li><a href="#sect_health_check">Health check</a></li>
<li><a href="#_metrics">Metrics</a></li>
<li><a href="#_setting_up_metrics_exporter">Setting up metrics exporter</a></li>
<li><a href="#_sentry">Sentry</a></li>
<li><a href="#_scheduling">Scheduling</a></li>
</ul>
</li>
<li><a href="#sect_upgrade">Upgrading</a>
<ul class="sectlevel1">
<li><a href="#_upgrade_paths">Upgrade paths</a>
<ul class="sectlevel2">
<li><a href="#_database_upgrades">Database upgrades</a></li>
</ul>
</li>
<li><a href="#_system_level_backup">System-level backup</a>
<ul class="sectlevel2">
<li><a href="#_file_system_backup">File system backup</a></li>
<li><a href="#_database_backups">Database backups</a></li>
</ul>
</li>
<li><a href="#_performing_an_in_place_upgrade">Performing an in-place upgrade</a></li>
<li><a href="#_upgrade_notes">Upgrade notes</a>
<ul class="sectlevel2">
<li><a href="#_inception_34_0">INCEpTION 34.0</a>
<ul class="sectlevel3">
<li><a href="#_database_schema_changes">Database schema changes</a></li>
</ul>
</li>
<li><a href="#_inception_33_0">INCEpTION 33.0</a>
<ul class="sectlevel3">
<li><a href="#_mariadb_upgrade_in_the_docker_compose_file">MariaDB upgrade in the Docker Compose file</a></li>
</ul>
</li>
<li><a href="#_inception_32_0">INCEpTION 32.0</a></li>
<li><a href="#_inception_25_0">INCEpTION 25.0</a>
<ul class="sectlevel3">
<li><a href="#_manual_intervention_for_external_pre_authentication_users">Manual intervention for external pre-authentication users</a></li>
<li><a href="#_configuration_property_names_changed">Configuration property names changed</a></li>
</ul>
</li>
<li><a href="#_inception_24_0">INCEpTION 24.0</a>
<ul class="sectlevel3">
<li><a href="#_pdf_editor">PDF editor</a></li>
<li><a href="#_compression">Compression</a></li>
<li><a href="#_full_text_indices">Full-text indices</a></li>
</ul>
</li>
<li><a href="#_inception_22_0">INCEpTION 22.0</a></li>
<li><a href="#_inception_21_0_1">INCEpTION 21.0.1</a></li>
<li><a href="#_inception_20_0">INCEpTION 20.0</a></li>
<li><a href="#_inception_0_16_0">INCEpTION 0.16.0</a></li>
<li><a href="#_inception_0_15_2">INCEpTION 0.15.2</a></li>
<li><a href="#_inception_0_12_0">INCEpTION 0.12.0</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sect_remote_api">Remote API</a>
<ul class="sectlevel1">
<li><a href="#_oauth2_authentication">OAuth2 authentication</a></li>
<li><a href="#sect_remote_api_webhooks">Webhooks</a>
<ul class="sectlevel2">
<li><a href="#_authentication_headers">Authentication headers</a></li>
<li><a href="#_retries">Retries</a></li>
<li><a href="#_bulk_changes">Bulk changes</a></li>
<li><a href="#_message_examples">Message examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sect_settings">Settings</a>
<ul class="sectlevel1">
<li><a href="#_general_settings">General Settings</a></li>
<li><a href="#sect_security_authentication_policy">Security policies</a></li>
<li><a href="#_database_connection">Database connection</a></li>
<li><a href="#_server_settings">Server Settings</a></li>
<li><a href="#_internal_annotation_backup">Internal annotation backup</a></li>
<li><a href="#sect_settings_cas_storage">CAS storage</a>
<ul class="sectlevel2">
<li><a href="#_cas_cache">CAS cache</a></li>
</ul>
</li>
<li><a href="#_document_im_export">Document Im-/Export</a></li>
<li><a href="#_custom_header_icons">Custom header icons</a></li>
<li><a href="#_project_dashboard">Project dashboard</a></li>
<li><a href="#_theming">Theming</a></li>
<li><a href="#sect_settings_annotation">Annotation editor</a>
<ul class="sectlevel2">
<li><a href="#sect_settings_annotation-editor_pdf">PDF Editor Settings</a></li>
<li><a href="#sect_settings_annotation-editor_pdf_legacy">PDF Editor Settings (legacy)</a></li>
<li><a href="#sect_settings_cross-layer-relations">Cross-layer relations</a></li>
<li><a href="#sect_settings_segmentation">Editable Segmentation Settings</a></li>
</ul>
</li>
<li><a href="#sect_settings_documentmetadata">Document Metadata Settings</a></li>
<li><a href="#sect_settings_concept-linking">Concept Linking</a>
<ul class="sectlevel2">
<li><a href="#_resources">Resources</a></li>
</ul>
</li>
<li><a href="#sect_settings_knowledge-base">Knowledge Base Settings</a></li>
<li><a href="#sect_settings_scheduler">Scheduler Settings</a></li>
<li><a href="#sect_settings_search">Document Repositories Settings</a></li>
<li><a href="#sect_settings_recommender">Recommender Settings</a>
<ul class="sectlevel2">
<li><a href="#sect_settings_String_relation_recommender">String Matching Recommender for Relations Settings</a></li>
<li><a href="#sect_settings_recommender_external">External Recommender Settings</a></li>
</ul>
</li>
<li><a href="#sect_settings_bulk_processing">Bulk Processing Settings</a></li>
<li><a href="#sect_settings_sharing">Invite Links Settings</a></li>
<li><a href="#sect_settings_versioning">🧪 Versioning Settings</a></li>
<li><a href="#sect_settings_websocket">Websocket Settings</a></li>
<li><a href="#sect_settings_assistant">🧪 Assistant</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide covers handling INCEpTION from an administrator&#8217;s perspective.</p>
</div>
</div>
</div>
<h1 id="sect_installation" class="sect0"><a class="anchor" href="#sect_installation"></a>Installation</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>You can run INCEpTION on any major platform supporting Java, i.e. Linux, macOS or Windows.
However, we do not provide explicit support for setting up a production-ready instance of each of these
platforms.</p>
</div>
<div class="paragraph">
<p>This guide assumes Debian 9.1 (Stretch). It may also work on Ubuntu with some modifications, but we
do not test this. Instructions for other Linux distributions and other platforms (i.e. macOS and
Windows) likely deviate significantly.</p>
</div>
<div class="paragraph">
<p>It is further assumed that the user <strong>www-data</strong> already exists on the system and that it shall be used to run the application.</p>
</div>
<div class="paragraph">
<p>All commands assume that you are logged in as the <strong>root</strong> user.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you cannot log in as root but have to use <code>sudo</code> to become root, then the recommended way
      to do that is using the command <code>sudo su -</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_system_requirements"><a class="anchor" href="#_system_requirements"></a>System Requirements</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Requirements for users</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Browser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chrome or Safari (latest versions)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph small">
<p>You should also be able to use INCEpTION with other browsers such as Firefox, Brave, etc. However, those are less regularly tested by the developers. It is recommended to always use the latest version of any browser product you may be using to ensure best compatibility.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Requirements to run the standalone version</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operating System</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux (64bit), macOS (64bit), Windows (64bit)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java Runtime Environment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version 17 or higher</p></td>
</tr>
</tbody>
</table>
<div class="paragraph small">
<p>The examples in this guide are based on a recent Debian Linux. Most of them should apply quite directly to Debian-based distributions like e.g. Ubuntu. INCEpTION will run on other distributions as well, but you may have to use different commands for managing users, installing software, etc.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Requirements run the server version</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operating System</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Linux (64bit), macOS (64bit), Windows (64bit)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java Runtime Environment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version 17 or higher</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DB Server</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MariaDB version 10.6 or higher<br>
  MySQL version 8.0 or higher<br>
  MS SQL Server 2022 or higher (🧪 experimental)<br>
  PostgreSQL 16.3 or higher (🧪 experimental)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph small">
<p>You may be able to run INCEpTION on older database server versions but it may require extra configuration that is not included in this documentation. You may consider referring to older versions of this administrators guide included with older versions of INCEpTION.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Requirements for a Docker-based deployment</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Docker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">version 24 or higher (arm64 or amd64)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_install_java"><a class="anchor" href="#_install_java"></a>Install Java</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you aim for a Docker-based deployment, it is useful for you to read the following sections to better understand
      how the overall setup works. However, you will not have to install Java. If you use Docker Compose, you may also not have
      to install a database. Refer to the <a href="#sect_docker">Running via Docker</a> section instead.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can install a Java 17 JDK using the following commands.</p>
</div>
<div class="listingblock">
<div class="title">Installing Java from your Linux distribution</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ apt update
$ apt install openjdk-17-jdk</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternative, you can install a more recent Java version e.g. from <a href="https://adoptium.net/en-GB/installation/linux/">Adoptium</a>.</p>
</div>
<div class="listingblock">
<div class="title">Installing Java from Adoptium</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ * apt update
$ apt install gpg
$ wget -qO - https://packages.adoptium.net/artifactory/api/gpg/key/public | gpg --dearmor | tee /etc/apt/trusted.gpg.d/adoptium.gpg &gt; /dev/null
$ echo "deb https://packages.adoptium.net/artifactory/deb $(awk -F= '/^VERSION_CODENAME/{print$2}' /etc/os-release) main" | tee /etc/apt/sources.list.d/adoptium.list
$ apt update
$ apt install temurin-21-jdk</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_home_folder"><a class="anchor" href="#sect_home_folder"></a>Application home folder</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The INCEpTION home folder is the place where INCEpTION&#8217;s configuration file <code>settings.properties</code>
resides and where INCEpTION stores its data. By default, this is a (hidden) folder called <code>.inception</code> in
the home directory of the user running INCEpTION. However, you can override the location of the
home folder using the system property <code>inception.home</code>.</p>
</div>
<div class="listingblock">
<div class="title">Passing a custom home folder location to INCEpTION when starting from the command line</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ java -Dinception.home="/srv/inception" -jar inception-app-webapp-35.5-standalone.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to use a <code>settings.properties</code> file, you need to place it into the INCEpTION home folder yourself.
While the home folder is automatically created if it does not exist, the <code>settings.properties</code> is not
automatically created by the application.
Mind that if you are using a dedicated database server
(recommended), then INCEpTION also stores some data in the dedicated database. This is important when
you plan to perform a backup, as both the home folder and the database content need to be
included in the backup.</p>
</div>
<div class="paragraph">
<p>Now, let&#8217;s go through the steps of setting up a home folder for INCEpTION and creating a
configuration file instructing INCEpTION to access a dedicated <a href="#sect_database">database</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create INCEpTION home folder. This is the directory where INCEpTION settings files and projects (documents, annotations, etc.) are stored</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ mkdir /srv/inception</code></pre>
</div>
</div>
</li>
<li>
<p>Create and edit <code>/srv/inception/settings.properties</code> to define the database connection as well as internal backup properties:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">database.url=jdbc:mariadb://localhost:3306/inception?useSSL=false&amp;serverTimezone=UTC&amp;useUnicode=yes&amp;characterEncoding=UTF-8
database.username=inception
database.password=t0t4llYSecreT</code></pre>
</div>
</div>
</li>
<li>
<p>Fix permissions in INCEpTION home folder</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ chown -R www-data:www-data /srv/inception</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_database"><a class="anchor" href="#sect_database"></a>Database</h2>
<div class="sectionbody">
<div class="paragraph">
<p>INCEpTION uses a SQL database to store project and user data.</p>
</div>
<div class="paragraph">
<p>INCEpTION uses by default an embedded HSQLDB database. However, we recommend using the embedded
database only for testing purposes. For production use, we recommend using a MariaDB server (or compatible). The reason
for this is, that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>some users have reported that HSQLDB databases may become corrupt when the computer crashes
(note that this could probably also happen with MariaDB, but we did so far not have any reports
about this);</p>
</li>
<li>
<p>most INCEpTION developers use MariaDB (or compatible) when running INCEpTION on their
servers;</p>
</li>
<li>
<p>in the past, we had cases where we described in-place upgrade procedures that required performing
SQL commands to change the data model as part of the upgrade. We promise to try avoiding this in
the future. However, in case we offer advice on fixing anything directly in the database, this
advice will refer to a MariaDB database.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We try to keep the data model simple, so there should be no significant requirements to the database
being used. Theoretically, it should be possible to use any JDBC-compatible database after adding a
corresponding driver to the classpath and configuring INCEpTION to use the driver in the
<code>settings.properties</code> file.</p>
</div>
<div class="sect2">
<h3 id="_mariadb"><a class="anchor" href="#_mariadb"></a>MariaDB</h3>
<div class="paragraph">
<p>For production use of INCEpTION, it is highly recommended to use a MariaDB database. In this
section, we briefly describe how to install a MariaDB server and how to prepare it for use with
the application.</p>
</div>
<div class="sect3">
<h4 id="_prepare_database"><a class="anchor" href="#_prepare_database"></a>Prepare database</h4>
<div class="ulist">
<ul>
<li>
<p>Install MariaDB</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ apt install mariadb-server</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div id="character-set-config" class="ulist">
<ul>
<li>
<p>When setting up your database make sure your MariaDB server is configured for 4-byte UTF-8
character set and (<code>utf8mb4</code>) and a case sensitive collation (<code>utf8mb4_bin</code>) to ensure that all
unicode characters can be represented (e.g. emojis).</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<details>
<summary class="title">Upgrading an existing database installation to 4 Byte UTF-8</summary>
<div class="content">
<div class="paragraph">
<p>Changing the character-set and
collation later can lead to serious trouble, so make sure you have a backup of your database.
In that case, you might also need to perform some additional migration steps. We do not
provide a database migration guide here, but if you search e.g. for <code>mariadb convert utf8 to
utf8mb4</code>, you should find several.</p>
</div>
</div>
</details>
<details>
<summary class="title">Case-sensitive vs insensitive collation (<code>utf8mb4_bin</code> vs. <code>utf8mb4_unicode_ci</code>)</summary>
<div class="content">
<div class="paragraph">
<p>If you search for UTF-8 support in MariaDB, you will generally find the recommendation to use <code>utf8mb4_unicode_ci</code> as the collation. This, however,is a <strong>case-insensitive</strong> collation. INCEpTION is usually <strong>case-sensitive</strong>. If you used a case-insensitive collation in the database, you could not create two projects, one being
called <code>MY PROEJCT</code> and the other being called <code>my project</code>, but instead of a nice error from
INCEpTION, you would get an ugly error from the database. That is why we recommend using
the case-sensitive <code>utf8mb4_bin</code> for the database.</p>
</div>
</div>
</details>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Check that the character set and collation are configured properly (in particular the items marked
with a <code>*</code> in the following table).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ mariadb -u root -p
MariaDB&gt; SHOW VARIABLES WHERE Variable_name LIKE 'character\_set\_%' OR Variable_name IN ('collation_database', 'collation_server');
+--------------------------+-------------+
| Variable_name            | Value       |
+--------------------------+-------------+
| character_set_client     | utf8mb4     | *
| character_set_connection | utf8mb4     |
| character_set_database   | utf8mb4     | *
| character_set_filesystem | binary      |
| character_set_results    | utf8mb4     |
| character_set_server     | utf8mb4     | *
| character_set_system     | utf8mb3     |
| collation_database       | utf8mb4_bin | *
| collation_server         | utf8mb4_bin | *
+--------------------------+-------------+</code></pre>
</div>
</div>
<div class="paragraph">
<p>If your settings differ, add following lines to your MariaDB config files (most likely
<code>/etc/mysql/my.cnf</code> or in <code>/etc/mysql/mariadb.conf.d</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">[client]
default-character-set = utf8mb4

[mysql]
default-character-set = utf8mb4

[mysqld]
character-set-client-handshake = FALSE
character-set-server = utf8mb4
collation-server = utf8mb4_bin</code></pre>
</div>
</div>
</li>
<li>
<p>now set up the <code>inception</code> database. First login to MariaDB</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ mariadb -u root -p</code></pre>
</div>
</div>
</li>
<li>
<p>create a database</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-mariadb" data-lang="mariadb">MariaDB&gt; CREATE DATABASE inception DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;</code></pre>
</div>
</div>
</li>
<li>
<p>create a database user called <code>inception</code> with the password <code>t0t4llYSecreT</code> which is later used by the application to access the database (instructions for the <code>settings.properties</code> file in the <a href="#sect_home_folder">Home Folder</a> section).</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-mariadb" data-lang="mariadb">MariaDB&gt; CREATE USER 'inception'@'localhost' IDENTIFIED BY 't0t4llYSecreT';
MariaDB&gt; GRANT ALL PRIVILEGES ON inception.* TO 'inception'@'localhost';
MariaDB&gt; FLUSH PRIVILEGES;</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
For production use, make sure you choose a different, secret, and secure password.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_older_mariadb_versions"><a class="anchor" href="#_older_mariadb_versions"></a>Older MariaDB versions</h4>
<div class="paragraph">
<p>Depending on the MariaDB version you are running, you might have to make additional settings.
You can check these settings using the following command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ mariadb -u root -p
MariaDB&gt; * SHOW VARIABLES WHERE Variable_name IN ('innodb_large_prefix', 'innodb_file_format', 'innodb_file_per_table', 'innodb_strict_mode', 'innodb_default_row_format');</code></pre>
</div>
</div>
<div class="paragraph">
<p>Depending on the result, you may have to add these settings to your MariaDB configuration files
(cf. <a href="https://mariadb.com/kb/en/innodb-system-variables/">InnoDB System Variables</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">[mysqld]
innodb_large_prefix=true            # Removed in MariaDB 10.6.0
innodb_file_format=barracuda        # Removed in MariaDB 10.6.0
innodb_file_per_table=1             # Deprecated in MariaDB 11.0.1
innodb_strict_mode=1
innodb_default_row_format='dynamic'</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jdbc_connection_options"><a class="anchor" href="#_jdbc_connection_options"></a>JDBC connection options</h4>
<div class="paragraph">
<p>This section explains some settings that can be added to the <code>database.url</code> in the
<code>settings.properties</code> file when using MariaDB. Settings are separated from the host name and database name with a <code>?</code> character and multiple settings are separated using the <code>&amp;</code> character, e.g.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>database.url=jdbc:mariadb://localhost:3306/inception?useSSL=false&amp;serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=UTF-8</pre>
</div>
</div>
<div class="paragraph">
<p>If use are using a non-SSL database connection append the
following setting to the <code>database.url</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>useSSL=false</pre>
</div>
</div>
<div class="paragraph">
<p>You might also need to add the following if the respective connection error occurs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>allowPublicKeyRetrieval=true</pre>
</div>
</div>
<div class="paragraph">
<p>Connections to the database may be rejected by the database server unless a timezone is specified.
The easiest way to do this is to add the following setting to the <code>database.url</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>serverTimezone=UTC</pre>
</div>
</div>
<div class="paragraph">
<p>For proper Unicode support, ensure that the database server and database connection are configured correctly:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in the <code>settings.properties</code> file, make sure that <code>database.url</code> includes</p>
<div class="listingblock">
<div class="content">
<pre>useUnicode=true&amp;characterEncoding=UTF-8</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sect_mysql"><a class="anchor" href="#sect_mysql"></a>MySQL</h3>
<div class="paragraph">
<p>The preferred database for use with INCEpTION is MariaDB. However, MariaDB and MySQL are largely compatible and in some environments, MariaDB may not be readily available. Thus, here you can find some additonal information specific to deploying INCEpTION using a MySQL database. Note that this section does not repeat all the setup instructions from the MariaDB section - the setup please refer to the MariaDB section first. This section only describes additional items specific to MySQL.</p>
</div>
<div class="sect3">
<h4 id="_using_the_mysql_jdbc_driver"><a class="anchor" href="#_using_the_mysql_jdbc_driver"></a>Using the MySQL JDBC driver</h4>
<div class="paragraph">
<p>INCEpTION only includes the MariaDB JDBC driver. According to the MariaDB documentation, this driver is also compatible with MySQL servers. However, additional settings may be necessary when connecting to a MySQL server.</p>
</div>
<div class="paragraph">
<p>If you want to use INCEpTION with MySQL instead of MariaDB, you may also have to explicitly define the database driver. The MariaDB driver should also work for MySQL databases, but if you use a <code>mysql</code> JDBC URL (like e.g. <code>jdbc:mysql://localhost:3306/inception</code>), you need to explicitly define the driver in the <code>settings.properties</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>database.driver=org.mariadb.jdbc.Driver</pre>
</div>
</div>
<div class="paragraph">
<p>In most cases, INCEpTION can auto-configure the database dialect to use. However, in some cases, this auto-detection may fail - in particular when using MySQL. For example, when using INCEpTION with MySQL 8, it may be necessary to explicitly add a database dialect configuration to the <code>settings.properties</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>database.dialect=org.hibernate.dialect.MySQL8Dialect</pre>
</div>
</div>
<div class="paragraph">
<p>Finally, recent versions of MySQL may need this setting to avoid schema validation to fail during startup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>spring.jpa.properties.hibernate.globally_quoted_identifiers=true</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jdbc_driver_options"><a class="anchor" href="#_jdbc_driver_options"></a>JDBC driver options</h4>
<div class="paragraph">
<p>Depending yon your environment, you might have to add additional options to the JDBC URL, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sslMode=REQUIRED</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hsqldb_embedded"><a class="anchor" href="#_hsqldb_embedded"></a>HSQLDB (embedded)</h3>
<div class="paragraph">
<p>INCEpTION displays a warning in the user interface when an embedded database is being used.
It is not recommended to used an embedded database for various reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HSQLDB databases are known to run a risk of becoming corrupt in case of power failures which may
render the application inaccessible and your data difficult to recover.</p>
</li>
<li>
<p>In very rare cases it may be necessary to fix the database content which is more inconvenient
for embedded databases.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In case that you really want to run INCEpTION with an embedded database in production,
you probably want to disable this warning. To do so, please add the following entry to
the <code>settings.properties</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>warnings.embeddedDatabase=false</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_via_embedded_tomcat_jar"><a class="anchor" href="#_running_via_embedded_tomcat_jar"></a>Running via embedded Tomcat (JAR)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The INCEpTION standalone JAR with an embedded Tomcat server and can be easily set up as a UNIX service.
This is the recommended way of running INCEpTION on a server.</p>
</div>
<div class="paragraph">
<p>The instructions below expect a Debian Linux system.
Details may vary on other OSes and Linux distributions.</p>
</div>
<div class="sect2">
<h3 id="_installing_as_a_service"><a class="anchor" href="#_installing_as_a_service"></a>Installing as a service</h3>
<div class="paragraph">
<p>To set it up as a service, you can do the following steps.
For the following example, we assume that you install INCEpTION in <code>/srv/inception</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Copy the standalone JAR file <code>inception-app-standalone-35.5.jar</code> to <code>/srv/inception/inception.jar</code>.
Note the change of the filename to <code>inception.jar</code>.</p>
</li>
<li>
<p>Create the file <code>/srv/inception/inception.conf</code> with the following content</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">JAVA_OPTS="-Djava.awt.headless=true -Dinception.home=/srv/inception"</code></pre>
</div>
</div>
</li>
<li>
<p>In the previous step, you have already created the <code>/srv/inception/settings.properties</code> file.
You <strong>may optionally</strong> configure the Tomcat port using the following line</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">server.port=18080</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you need to do additional configurations of the embedded Tomcat, best refer to the documentation of Spring Boot itself.</p>
</div>
</li>
<li>
<p>We will run INCEpTION as the user <code>www-data</code>.
Change the owner/group of <code>/srv/inception/inception.jar</code> to <code>www-data</code>.
<strong>Do NOT run INCEpTION as root.</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ chown www-data:www-data /srv/inception/inception.jar</code></pre>
</div>
</div>
</li>
<li>
<p>Make the JAR file executable:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ chmod +x /srv/inception/inception.jar</code></pre>
</div>
</div>
</li>
<li>
<p>Create a file <code>/etc/systemd/system/inception.service</code> with the following content:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">[Unit]
Description=INCEpTION

[Service]
ExecStart=/srv/inception/inception.jar
User=www-data

[Install]
WantedBy=multi-user.target</code></pre>
</div>
</div>
</li>
<li>
<p>Enable the INCEpTION service using</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ systemctl enable inception</code></pre>
</div>
</div>
</li>
<li>
<p>Start INCEpTION using</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ systemctl start inception</code></pre>
</div>
</div>
</li>
<li>
<p>Check the log output</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ journalctl -u inception</code></pre>
</div>
</div>
</li>
<li>
<p>Stop INCEpTION using</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ systemctl stop inception</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you encounter strange errors, e.g. <code>{status=203/EXEC}</code>  and INCEpTION starts when directly executing the jar but not via systemd, then we recommend to disable SELinux.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_loading_extra_java_libraries"><a class="anchor" href="#_loading_extra_java_libraries"></a>Loading extra Java libraries</h3>
<div class="paragraph">
<p>When running an application from a fat JAR (i.e. using <code>java -jar &#8230;&#8203;</code>), there is no way that you can specify extra libraries for the application to load (e.g. a database driver).
Therefore,
INCEpTION offers a special approach that works around this limitation.</p>
</div>
<div class="paragraph">
<p>In order to have the application load additional JAR files during startup, create a folder <code>lib</code> in the application home folder.
Place any JARs that you want to load into that folder.</p>
</div>
<div class="paragraph">
<p>To check if the loading works as expected, you can add the parameter <code>-Dloader.debug=true</code> when starting up INCEpTION.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_reverse_proxy"><a class="anchor" href="#sect_reverse_proxy"></a>Running the behind a reverse proxy (JAR)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These are <strong>optional</strong> instructions if you want to run INCEpTION behind an Apache HTTPD, Nginx or Caddy web-server instead of accessing it directly.</p>
</div>
<div class="paragraph">
<p>These guides assumes Debian 9.1 (Stretch) as the operating system.
For the optional SSL configuration, it further assumes that you want to use <a href="https://letsencrypt.org/">Let&#8217;s Encrypt</a> as a CA for obtaining valid SSL certificates.</p>
</div>
<div class="paragraph">
<p>The setup for INCEpTION itself is the same for Apache, Nginx and Caddy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the following lines to <code>/srv/inception/settings.properties</code> (replacing <code>your.public.domain.name.com</code> with the public domain name of your reverse proxy):</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text"># Port INCEpTION is listening on
server.port=8080

# If your reverse proxy is running on the same host as {product-name},
# you can use the next line to prevent direct access to INCEpTION from other hosts
server.address=127.0.0.1

# In our examples, we run {product-name} at `your.public.domain.name.com/inception`
# If you want to Run {product-name} directly under the host name without an
# additional path, remove this line
server.servlet.context-path=/inception

# Tell {product-name} which URL your users will enter into their browsers to access it.
# Make sure you have an entry with and an entry without the protocol.
# If you also allow unencrypted http (not recommended) then also add a line with
# the http protocol
wicket.core.csrf.accepted-origins[0]=your.public.domain.name.com
wicket.core.csrf.accepted-origins[1]=https://your.public.domain.name.com</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_csrf_protection"><a class="anchor" href="#_csrf_protection"></a>CSRF protection</h3>
<div class="paragraph">
<p>Depending on your situation, you may get an error message such as this when trying to use
INCEpTION.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Whitelabel Error Page This application has no explicit mapping for /error, so you are seeing this as a fallback.</p>
</div>
<div class="paragraph">
<p>Fri Nov 29 14:01:15 BRT 2019 There was an unexpected error (type=Bad Request, status=400).
Origin does not correspond to request</p>
</div>
</div>
</div>
<div class="paragraph">
<p>If this is the case, then CSRF protection is kicking in.
Check that the following lines are in your <code>settings.properties</code> file (see <a href="#sect_settings">Settings</a>, replace the server name and URL with your own):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>wicket.core.csrf.accepted-origins[0]=your.public.domain.name.com
wicket.core.csrf.accepted-origins[1]=https://your.public.domain.name.com</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You could disable CSRF completely, but this is obviously not the recommended approach. To disable CSRF, add <code>wicket.core.csrf.enabled=false</code> to the <code>settings.properties</code> file.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_apache_httpd_as_reverse_proxy"><a class="anchor" href="#_apache_httpd_as_reverse_proxy"></a>Apache HTTPD as reverse proxy</h3>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Make sure you have read the <a href="#sect_reverse_proxy">general instructions</a> for running behind
       a reverse proxy and have configured your <a href="#sect_settings">settings file</a> accordingly, otherwise you will not be able
       to properly use INCEpTION via the reverse proxy!
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>This assumes that you already have the following packages installed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Apache Web Server (tested with Apache/2.4.57 on Debian)</p>
</li>
<li>
<p>mod_proxy</p>
</li>
<li>
<p>mod_proxy_http</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can enable the two modules with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ a2enmod proxy proxy_http</code></pre>
</div>
</div>
<div class="paragraph">
<p>and check that they are enabled with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ apachectl -M</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Edit <code>/etc/apache2/conf-available/inception.local.conf</code> (alternatively, you may want to configure a new virtual host for INCEpTION)</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">ProxyPreserveHost On

&lt;Location "/inception"&gt;
  RequestHeader set "X-Forwarded-Proto" expr=%{REQUEST_SCHEME}
  RequestHeader set "X-Forwarded-SSL" expr=%{HTTPS}
&lt;/Location&gt;

ProxyPass /inception http://localhost:8080/inception upgrade=websocket
ProxyPassReverse /inception http://localhost:8080/inception</code></pre>
</div>
</div>
</li>
<li>
<p>Enable the configuration with</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ a2enconf inception.local</code></pre>
</div>
</div>
</li>
<li>
<p>Restart Apache web server</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ service apache2 restart</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_obtaining_a_lets_encrypt_certificate"><a class="anchor" href="#_obtaining_a_lets_encrypt_certificate"></a>Obtaining a Let&#8217;s Encrypt certificate</h4>
<div class="paragraph">
<p>The Certification Authority (CA) <em>Let&#8217;s Encrypt</em> provides free TLS/SSL certificates.
These certificates allow for secure HTTPS connections on web servers.
<em>Let&#8217;s Encrypt</em> provides the software Certbot which automates the obtaining process for Apache.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://backports.debian.org/Instructions/">Enable the Stretch backports repo</a> if needed</p>
</li>
<li>
<p>Enable mod_ssl</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ sudo a2enmod ssl</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Install Certbot preconfigured for Apache</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ apt-get install python-certbot-apache -t stretch-backports</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Obtain the certificates for your domain <code>example.com</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ certbot --apache certonly -d example.com</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>You will be prompted to enter your e-mail address and asked to agree to the terms of service.
Certificate renewal information will be sent to this e-mail.
If the certification process is successful it will yield the information where your certificates can be found.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at
   /etc/letsencrypt/live/example.com/fullchain.pem. Your cert will
   expire on 2019-04-22. To obtain a new or tweaked version of this
   certificate in the future, simply run certbot again with the
   "certonly" option. To non-interactively renew *all* of your
   certificates, run "certbot renew"
 - Your account credentials have been saved in your Certbot
   configuration directory at /etc/letsencrypt. You should make a
   secure backup of this folder now. This configuration directory will
   also contain certificates and private keys obtained by Certbot so
   making regular backups of this folder is ideal.
 - If you like Certbot, please consider supporting our work by:

   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
   Donating to EFF:                    https://eff.org/donate-le</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Certificates issued by <em>Let&#8217;s Encrypt</em> are valid for 90 days.
You will receive an expiry notification to the e-mail address you provided during the certification process.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Run Certbot with the command <code>renew</code> to renew all certificates that are due.
You can also create a cron job for this purpose.
The command for renewal is</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ certbot --apache renew</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>You can simulate the certificate renewal process with the command</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ certbot --apache renew --dry-run</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The directory <code>/etc/letsencrypt/live/example.com/</code> now contains the necessary certificates to proceed</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ls /etc/letsencrypt/live/example.com
Output:
cert.pem  chain.pem  fullchain.pem  privkey.pem</pre>
</div>
</div>
<div class="paragraph">
<p>Then the configuration of the web server only needs this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">&lt;VirtualHost *:443&gt;
    ServerName example.com
    DocumentRoot /var/www/html
    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/example.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem
    Include /etc/letsencrypt/options-ssl-apache.conf
&lt;/VirtualHost&gt;

&lt;VirtualHost *:80&gt;
    ServerName example.com
    Redirect / https://example.com/
    RewriteEngine on
    RewriteCond %{SERVER_NAME} =example.com
    RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [END,NE,R=permanent]
&lt;/VirtualHost&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_nginx_as_reverse_proxy"><a class="anchor" href="#_nginx_as_reverse_proxy"></a>NGINX as reverse proxy</h3>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Make sure you have read the <a href="#sect_reverse_proxy">general instructions</a> for running behind
       a reverse proxy and have configured your <a href="#sect_settings">settings file</a> accordingly, otherwise you will not be able
       to properly use INCEpTION via the reverse proxy!
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>This section describes using <a href="https://www.nginx.com/">NGINX</a> as a web server serving as a reverse proxy for INCEpTION.
It further assumes that you want to use <a href="https://letsencrypt.org/">Let&#8217;s Encrypt</a> as a CA for obtaining valid SSL certificates.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can install NGINX by typing</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ apt-get update
$ apt-get install nginx</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Verify the installation with</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ systemctl status nginx
Output:
● nginx.service - A high-performance web server and a reverse proxy server
   Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)
   Active: active (running) since Mon 2019-01-21 14:42:01 CET; 20h ago
     Docs: man:nginx(8)
  Process: 7947 ExecStop=/sbin/start-stop-daemon --quiet --stop --retry QUIT/5 --pidfile /run/nginx.pid (code=exited, status=0/SUCCESS)
  Process: 7953 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS)
  Process: 7950 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS)
 Main PID: 7955 (nginx)
    Tasks: 9 (limit: 4915)
   CGroup: /system.slice/nginx.service
           ├─7955 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;
           ├─7956 nginx: worker process</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>You can stop, start or restart NGINX with</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ systemctl stop nginx

$ systemctl start nginx

$ systemctl restart nginx</pre>
</div>
</div>
<div class="sect3">
<h4 id="_obtaining_a_lets_encrypt_certificate_2"><a class="anchor" href="#_obtaining_a_lets_encrypt_certificate_2"></a>Obtaining a Let&#8217;s Encrypt certificate</h4>
<div class="paragraph">
<p>The Certification Authority (CA) <em>Let&#8217;s Encrypt</em> provides free TLS/SSL certificates.
These certificates allow for secure HTTPS connections on web servers.
<em>Let&#8217;s Encrypt</em> provides the software Certbot which automates the obtaining process for NGINX.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://backports.debian.org/Instructions/">Enable the Stretch backports repo</a> if needed</p>
</li>
<li>
<p>Install Certbot preconfigured for NGINX</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ apt-get install python-certbot-nginx -t stretch-backports</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Obtain the certificates for your domain <code>example.com</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ certbot --nginx certonly -d example.com</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>You will be prompted to enter your e-mail address and asked to agree to the terms of service.
Certificate renewal information will be sent to this e-mail.
If the certification process is successful it will yield the information where your certificates can be found.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at
   /etc/letsencrypt/live/example.com/fullchain.pem. Your cert will
   expire on 2019-04-22. To obtain a new or tweaked version of this
   certificate in the future, simply run certbot again with the
   "certonly" option. To non-interactively renew *all* of your
   certificates, run "certbot renew"
 - Your account credentials have been saved in your Certbot
   configuration directory at /etc/letsencrypt. You should make a
   secure backup of this folder now. This configuration directory will
   also contain certificates and private keys obtained by Certbot so
   making regular backups of this folder is ideal.
 - If you like Certbot, please consider supporting our work by:

   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
   Donating to EFF:                    https://eff.org/donate-le</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Certificates issued by <em>Let&#8217;s Encrypt</em> are valid for 90 days.
You will receive an expiry notification to the e-mail address you provided during the certification process.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Run Certbot with the command <code>renew</code> to renew all certificates that are due.
You can also create a cron job for this purpose.
The command for renewal is</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ certbot --nginx renew</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>You can simulate the certificate renewal process with the command</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ certbot --nginx renew --dry-run</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The directory <code>/etc/letsencrypt/live/example.com/</code> now contains the necessary certificates to proceed</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ls /etc/letsencrypt/live/example.com
Output:
cert.pem  chain.pem  fullchain.pem  privkey.pem</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_putting_it_all_together"><a class="anchor" href="#_putting_it_all_together"></a>Putting it all together</h4>
<div class="paragraph">
<p>By now you should have</p>
</div>
<div class="ulist">
<ul>
<li>
<p>INCEpTION running on port 8080</p>
</li>
<li>
<p>NGINX running with default configurations on port 80</p>
</li>
<li>
<p>your issued SSL certificates</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are running INCEpTION on a different port than 8080, please make sure to adjust the configurations below accordingly!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We will now configure NGINX to proxy pass all traffic received at <code>example.com/inception</code> to our INCEpTION instance.</p>
</div>
<div class="paragraph">
<p>Create a new virtual host for your domain.
Inside of <code>/etc/nginx/sites-available/</code> create a new file for your domain (e.g. <code>example.com</code>).
Paste the following contents:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Server block for insecure http connections on port 80. Redirect to https on port 443
server {
        listen          80;
        listen          [::]:80;
        server_name     example.com;
        return          301 https://$server_name$request_uri;
}

# Server block for secure https connections
server {
        listen 443 ssl;
        listen [::]:443 ssl;
        server_name inception.example.com;

        ssl on;

        # Replace certificate paths
        ssl_certificate         /etc/letsencrypt/live/example.com/fullchain.pem;
        ssl_certificate_key     /etc/letsencrypt/live/example.com/privkey.pem;
        ssl_trusted_certificate /etc/letsencrypt/live/example.com/fullchain.pem;

        # Modern SSL Config from
        # https://mozilla.github.io/server-side-tls/ssl-config-generator/
        ssl_protocols TLSv1.2;
        ssl_ciphers 'ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256';
        ssl_prefer_server_ciphers on;
        ssl_session_timeout 1d;
        ssl_session_tickets off;
        add_header Strict-Transport-Security max-age=15768000;
        ssl_stapling on;
        ssl_stapling_verify on;

        ignore_invalid_headers off; #pass through headers from INCEpTION which are considered invalid by NGINX server.

        # Change body size if needed. This defines the maximum upload size for files.
        client_max_body_size    10M;

        # Uncommend this for a redirect from example.com to example.com/inception
        #location / {
        #    return 301 https://$host/inception;
        #}

        location /inception/ws {
            proxy_pass http://127.0.0.1:8080;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "Upgrade";
            proxy_set_header Host $host;
        }

        location ^~ /inception/ {
            proxy_pass http://127.0.0.1:8080/inception/;
            proxy_redirect http://inception.example.com/ /;
            proxy_http_version 1.1;

            proxy_set_header   Host             $host;
            proxy_set_header   X-Real-IP        $remote_addr;
            proxy_set_header   X-Forwarded-For  $remote_addr;
            proxy_set_header   X-Forwarded-Proto $scheme;
            proxy_max_temp_file_size 0;

            proxy_connect_timeout      180;
            proxy_send_timeout         180;
            proxy_read_timeout         180;

            proxy_temp_file_write_size 64k;

            # Required for new HTTP-based CLI
            proxy_request_buffering off;
            proxy_buffering off; # Required for HTTP-based CLI to work over SSL
            proxy_set_header Connection ""; # Clear for keepalive
    }

    # Deny access to Apache .htaccess files. They have no special meaning for NGINX and might leak sensitive information
    location ~ /\.ht {
            deny all;
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Create a symlink for the new configuration file to the folder for accessible websites:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/example.com</pre>
</div>
</div>
<div class="paragraph">
<p>Test if the NGINX configuration file works without restarting (and possibly breaking) the webserver:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ nginx -t
Output:
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful</pre>
</div>
</div>
<div class="paragraph">
<p>If the config works restart the webserver to enable the new site</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ service nginx restart</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_caddy_as_a_reverse_proxy"><a class="anchor" href="#_caddy_as_a_reverse_proxy"></a>Caddy as a reverse proxy</h3>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Make sure you have read the <a href="#sect_reverse_proxy">general instructions</a> for running behind
       a reverse proxy and have configured your <a href="#sect_settings">settings file</a> accordingly, otherwise you will not be able
       to properly use INCEpTION via the reverse proxy!
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>This section describes using <a href="https://caddyserver.com/">Caddy</a> as a web server serving as a reverse proxy for INCEpTION.
It further assumes that you want to use the builting funcionality to use <a href="https://letsencrypt.org/">Let&#8217;s Encrypt</a> as a CA for obtaining valid SSL certificates.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can install caddy by following the steps in <a href="https://caddyserver.com/docs/install">Caddy</a>.
We assume that you will use the default Systemd configuration that comes with e.g. installing Caddy via apt.
Also, we assume that the host you are running Caddy on has a valid DNS entry and is reachable from the internet.</p>
</li>
<li>
<p>Verify the installation with</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ systemctl status caddy
● caddy.service - Caddy
   Loaded: loaded (/lib/systemd/system/caddy.service; enabled; vendor preset: enabled)
   Active: active (running) since Wed 2022-04-27 23:17:14 CEST; 2 weeks 5 days ago
     Docs: https://caddyserver.com/docs/
 Main PID: 3541 (caddy)
      CPU: 8min 36.550s
   CGroup: /system.slice/caddy.service
           └─3541 /usr/bin/caddy run --environ --config /etc/caddy/Caddyfile</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>You can stop, start or restart Caddy with</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>$ systemctl stop caddy

$ systemctl start caddy

$ systemctl restart caddy</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Edit the Caddyfile under <code>/etc/caddy/Caddyfile</code> and paste the following (and adjust it to your own needs):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>example.com

handle_path "/inception" {
    reverse_proxy 127.0.0.1:8080
}</pre>
</div>
</div>
<div class="paragraph">
<p>After you restart the Caddy service, you now have a running reverse proxy with automatic HTTPS certificates!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_docker"><a class="anchor" href="#sect_docker"></a>Running via Docker</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_quick_start"><a class="anchor" href="#_quick_start"></a>Quick start</h3>
<div class="paragraph">
<p>If you have Docker installed, you can run INCEpTION using</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ docker run -it --name inception -p8080:8080 ghcr.io/inception-project/inception:35.5</code></pre>
</div>
</div>
<div class="paragraph">
<p>The command downloads INCEpTION from GitHub and starts it on port 8080. If this port is not
available on your machine, you should provide another port to the <code>-p</code> parameter.</p>
</div>
<div class="paragraph">
<p>The logs will be printed to the console. To stop the container, press <code>CTRL-C</code>.</p>
</div>
<div class="paragraph">
<p>To run the INCEpTION docker in the background use</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ docker run -d --name inception -p8080:8080 ghcr.io/inception-project/inception:35.5</code></pre>
</div>
</div>
<div class="paragraph">
<p>Logs are accessible by typing</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ docker logs inception</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Use <code>docker run</code> only the first time that you run INCEpTION. If you try it a second time, Docker
      will complain about the name <code>inception</code> already being in use. If you follow Docker`s suggestion
      to delete the container, you will loose all your INCEpTION data. Further below, we explain how
      you can store your data outside the container in a folder on your host.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When you want to run INCEpTION again later, use the command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ docker start -ai inception</code></pre>
</div>
</div>
<div class="paragraph">
<p>or for the background mode</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ docker start inception</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_storing_data_on_the_host"><a class="anchor" href="#_storing_data_on_the_host"></a>Storing data on the host</h3>
<div class="paragraph">
<p>If you follow the quick start instructions above, INCEpTION will store all its data inside the docker
container. This is normally not what you want because as soon as you delete the container, all data
is gone. That means for example that you cannot easily upgrade to a new version of the INCEpTION
docker image when one is released.</p>
</div>
<div class="paragraph">
<p>To store your data on your host computer, first create a folder where you want to store your data.
For example, if you are on Linux, you could create a folder <code>/srv/inception</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mkdir /srv/inception</pre>
</div>
</div>
<div class="paragraph">
<p>When you run INCEpTION via Docker, you then mount this folder into the container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ docker run -it --name inception -v /srv/inception:/export -p8080:8080 ghcr.io/inception-project/inception:35.5</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_settings_file"><a class="anchor" href="#_settings_file"></a>Settings file</h3>
<div class="paragraph">
<p>The dockerized INCEpTION expects the <code>settings.properties</code> file in the <code>/export</code> folder. Instead of
injecting a custom <code>settings.properties</code> file into the container, it is strongly recommender to
use the instructions above (Storing data on the host) to mount a folder from the host system to
<code>/export</code> then to place the into the mounted folder <code>settings.properties</code>. Thus, if you follow
the instructions above, the settings file would go to <code>/srv/inception/settings.properties</code> on the host
system.</p>
</div>
</div>
<div class="sect2">
<h3 id="_connecting_to_a_dedicated_database"><a class="anchor" href="#_connecting_to_a_dedicated_database"></a>Connecting to a dedicated database</h3>
<div class="paragraph">
<p>By default, INCEpTION uses an embedded SQL database to store its metadata (not the texts,
annotations and knowledge bases, these are stored in files on disk). For production use, it is highly
recommended to use a dedicated database server (i.e. MariaDB or compatible) instead of the embedded
SQL database.</p>
</div>
</div>
<div class="sect2">
<h3 id="_memory_and_other_java_options"><a class="anchor" href="#_memory_and_other_java_options"></a>Memory and other Java options</h3>
<div class="paragraph">
<p>By default, INCEpTION will use 80% of the memory allocated to the container.
However, if you allocate very little or very much memory to the container, you may want to adjust this.</p>
</div>
<div class="paragraph">
<p>For example, to set the available memory (RAM) to e.g. 4GB, append <code>-Xmx4g</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ docker run -it -e JAVA_MEM_OPTS=-Xmx4g ghcr.io/inception-project/inception:35.5</code></pre>
</div>
</div>
<div class="paragraph">
<p>Be sure to leave some memory for the operating system inside the Docker container as well. Instead of setting a fixed value for the memory, you might consider allocating a percentage of the container&#8217;s memory to INCEpTION using <code>-XX:MaxRAMPercentage=80</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ docker run -it -e JAVA_MEM_OPTS=-XX:MaxRAMPercentage=80 ghcr.io/inception-project/inception:35.5</code></pre>
</div>
</div>
<div class="paragraph">
<p>The applications logs the amount of memory it will use during startup. Check this value to validate that your memory setting takes effect.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>INFO [main] [SYSTEM] boot - Max. application memory: 4096MB</pre>
</div>
</div>
<div class="paragraph">
<p>You also pass additional options to the Java runtime through the <code>JAVA_OPTS</code> environment variable. This also includes system properties, e.g. <code>-DpropertName=value</code>. Most of the settings that can be configured in the <code>settings.properties</code> file can also be supplied in this way instead.</p>
</div>
</div>
<div class="sect2">
<h3 id="_customizing_uidgid"><a class="anchor" href="#_customizing_uidgid"></a>Customizing UID/GID</h3>
<div class="paragraph">
<p>By default, INCEpTION runs with the UID 2000 and the GID 2000. On startup, any files belonging to INCEpTION are automatically reassigned to these UID/GID, in the Docker container itself as well as in any volume potentially mounted under <code>/export</code> within the container. If you need the application to run as a different UID/GID, you can override these values when starting the container using the <code>APP_UID</code> and <code>APP_GID</code> environment variables.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ docker run -it -e APP_UID=1234 -e APP_GID=4321 ghcr.io/inception-project/inception:{revnumber}</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the container is already started using a non-root UID, then <code>APP_UID</code> and <code>APP_GID</code> have no effect and also
      no changes to the file ownerships in <code>/export</code> will be performed. This is e.g. the case when running a container using
      <code>-u</code> parameter or using the Kubernetes <code>runAsUser</code> setting.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_application_arguments"><a class="anchor" href="#_application_arguments"></a>Application arguments</h3>
<div class="paragraph">
<p>If it becomes necessary to pass command line arguments to INCEpTION running in Docker, this can be done using the
<code>APP_ARGS</code> environment variable. Note, this is specifically for application parameters, not for parameters for the Java
Virtual Machine.</p>
</div>
</div>
<div class="sect2">
<h3 id="sect_docker_compose"><a class="anchor" href="#sect_docker_compose"></a>Docker Compose</h3>
<div class="paragraph">
<p>Using Docker Compose, you can manage multiple related containers. This section illustrates how to use
Docker Compose to jointly set up a INCEpTION container as well as a database container (i.e.
<a href="https://hub.docker.com/_/mariadb/">this one</a>).</p>
</div>
<div class="paragraph">
<p>The following Compose script sets these containers up.</p>
</div>
<div class="listingblock">
<div class="title">Docker Compose script</div>
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">##
# docker-compose up [-d]
# docker-compose down
##
version: '2.4'

networks:
  inception-net:

services:
  db:
    image: "mariadb:11.4"
    environment:
      - MARIADB_RANDOM_ROOT_PASSWORD=yes
      - MARIADB_DATABASE=inception
      - MARIADB_USER=${DBUSER:-inception}
      - MARIADB_PASSWORD=${DBPASSWORD:-inception}
      - MARIADB_AUTO_UPGRADE=1
    volumes:
      - ${INCEPTION_DB_HOME:-db-data}:/var/lib/mysql
    command: ["--character-set-server=utf8mb4", "--collation-server=utf8mb4_bin"]
    healthcheck:
      test: ["CMD", "mariadb-admin" ,"ping", "-h", "localhost", "-p${DBPASSWORD:-inception}", "-u${DBUSER:-inception}"]
      interval: 20s
      timeout: 10s
      retries: 10
    networks:
      inception-net:

  app:
    image: "${INCEPTION_IMAGE:-ghcr.io/inception-project/inception}:${INCEPTION_VERSION:-35.5}"
    ports:
      - "${INCEPTION_PORT:-8080}:8080"
    environment:
      - INCEPTION_DB_DIALECT=org.hibernate.dialect.MariaDB106Dialect
      - INCEPTION_DB_URL=jdbc:mariadb://db:3306/inception?useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8
      - INCEPTION_DB_USERNAME=${DBUSER:-inception}
      - INCEPTION_DB_PASSWORD=${DBPASSWORD:-inception}
    volumes:
      - ${INCEPTION_HOME:-app-data}:/export
    depends_on:
      db:
        condition: service_healthy
    restart: unless-stopped
    networks:
      inception-net:
      
volumes:
  app-data:
  db-data:</code></pre>
</div>
</div>
<div class="paragraph">
<p>Place the script into any folder, change to that folder, and issue the following command to start
the containers.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ docker-compose -p inception up -d</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will start two docker containers: <code>inception_db_1</code>, and <code>inception_app_1</code>.
You can check the logs of each by running</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ docker logs inception_db_1
$ docker logs inception_app_1</code></pre>
</div>
</div>
<div class="paragraph">
<p>The actual name of these containers might vary. A list of running containers can be retrieved by</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ docker ps</code></pre>
</div>
</div>
<div class="paragraph">
<p>The data of the containers will be stored in Docker volumes. If you shut the containers down and
start them again later, the data will still be there - try it out!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ docker-compose -p inception down</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can list the Docker volumes on your system using</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ docker volume ls</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to provide a custom <code>settings.properties</code> file, you can also choose to mount the data volume
to your hosts file system instead of to a Docker volume by setting the <code>INCEPTION_HOME</code> environment
variable to the path you want to store your data in and where you will also put the <code>settings.properties</code>
file. You can also choose to override the default location for the database data by setting the
<code>INCEPTION_DB_HOME</code> environment variable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ export INCEPTION_HOME=/srv/inception/app-data
$ export INCEPTION_DB_HOME=/srv/inception/db-data
$ docker-compose -f docker-compose.yml -p inception up</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are running Docker on Linux, the data of the volumes should end up on the file system anyway
in a special folder used by Docker. You can figure out which folder that is using
<code>docker volume inspect &#8230;&#8203;</code>. However, if you are running Docker on macOS or Windows, the data is likely to
live in a special virtual machine that is owned by Docker and it will not be easily accessible unless
you mount the data to folders on your host.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Mind that you cannot arbitrarily switch between volume-managed and host-stored data. Choose wisely.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There is a lot more that you can do using Docker and Docker Compose. Please see the <a href="https://docs.docker.com/compose/">docker-compose reference</a> for details.</p>
</div>
<div class="sect3">
<h4 id="_upgrading_with_docker_compose"><a class="anchor" href="#_upgrading_with_docker_compose"></a>Upgrading with Docker Compose</h4>
<div class="paragraph">
<p>When new versions of INCEpTION are released, they may at times include an updated Docker Compose example file.</p>
</div>
<div class="paragraph">
<p>Starting with INCEpTION 33.0, the MariaDB container that is configured in the example file will set the environment
variable <code>MARIADB_AUTO_UPGRADE</code> to <code>1</code> to have MariaDB automatically upgrade its internal tables when encountering a database
produced with an earlier version of MariaDB (see <a href="https://hub.docker.com/_/mariadb">MariaDB Environment Variables</a>.
If you do not want this behavior, be sure to remove this settings from the compose file.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_kubernetes"><a class="anchor" href="#sect_kubernetes"></a>Running via Kubernetes</h2>
<div class="sectionbody">
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
This is a <strong>very rough</strong> guide on how INCEpTION could be deployed using
      Kubernetes. If you are familiar with Kubernetes and cloud deployment, you will
      probably find a lot here that can be improved. Great! Best help us improving this
      guide by sending us your improvement suggestions through
      <a href="https://github.com/inception-project/inception">GitHub</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following Kubernetes file sets up INCEpTION along with a few volumes.
It does currently <strong>NOT</strong> set up a database container but instead uses the built-in
database <strong>which is not recommended for production environments</strong>. Also, it uses
folders on the host system for volumes. It is only meant as an illustration.
<strong>Be sure to adjust this to your environment and to use a proper database!</strong></p>
</div>
<div class="listingblock">
<div class="title">Kubernetes deployment descriptor</div>
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">kind: PersistentVolume
apiVersion: v1
metadata:
  name: inception-data-pv
  labels:
    type: local
spec:
  storageClassName: standard
  capacity:
    storage: 5Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: "/srv/inception-kubernetes/data"
---
kind: PersistentVolume
apiVersion: v1
metadata:
  name: inception-log-pv
  labels:
    type: local
spec:
  storageClassName: standard
  capacity:
    storage: 5Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: "/srv/inception-kubernetes/data"
---
kind: PersistentVolume
apiVersion: v1
metadata:
  name: inception-tmp-pv
  labels:
    type: local
spec:
  storageClassName: standard
  capacity:
    storage: 5Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: "/srv/inception-kubernetes/data"
---
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: inception-data-pvc
spec:
  storageClassName: standard
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 5Gi
---
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: inception-tmp-pvc
spec:
  storageClassName: standard
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 5Gi
---
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: inception-log-pvc
spec:
  storageClassName: standard
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 5Gi
---
apiVersion: v1
kind: Service
metadata:
   name: inception-svc
   labels:
     app: inception
spec:
   type: NodePort
   ports:
   - protocol: TCP
     port: 8080
     targetPort: 8080
     nodePort: 32000
   selector:
     app: inception
---     
apiVersion: apps/v1
kind: Deployment
metadata:
  name: inception
spec:
  selector:
    matchLabels:
      app: inception
  replicas: 1
  template:
    metadata:
      labels:
        app: inception
    spec:
      securityContext:
        runAsUser: 2000
        runAsGroup: 2000
        fsGroup: 2000
        runAsNonRoot: true
      containers:
      - name: inception
        image: "ghcr.io/inception-project/inception-snapshots:35.5"
        imagePullPolicy: Always
        ports:
        - containerPort: 8080
        securityContext:
          readOnlyRootFilesystem: true
          privileged: false
        volumeMounts:
        - mountPath: /export
          name: inception-data-pv
        - mountPath: /tmp
          name: inception-tmp-pv
        - mountPath: /var/log
          name: inception-log-pv
      volumes:
      - name: inception-data-pv
        persistentVolumeClaim:
          claimName: inception-data-pvc
      - name: inception-tmp-pv
        persistentVolumeClaim:
          claimName: inception-tmp-pvc
      - name: inception-log-pv
        persistentVolumeClaim:
          claimName: inception-log-pvc</code></pre>
</div>
</div>
<div class="paragraph">
<p>To deploy an INCEpTION service copy this to a file called <code>inception.yml</code> and then run it using</p>
</div>
<div class="listingblock">
<div class="title">Create Kubernetes environment</div>
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">$ kubectl create -f inception.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>To delete the service again, use</p>
</div>
<div class="listingblock">
<div class="title">Delete Kubernetes environment</div>
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">$ kubectl delete -f inception.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>This can be tested e.g. using the Kubernetes support built into recent Docker Desktop. If you experience problems, make sure you run the latest version of Docker Desktop.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_errors"><a class="anchor" href="#sect_errors"></a>Common issues and solution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">The default Ingress configuration of Kubernetes sets a limit on the file uploads which can cause an error when trying to import a large file.This can be fixed by adding the following annotation to the Ingress configuration to increase the maximum allowed file upload size. In annotations under metadata add the following and change the value according to your preference.</div>
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">$ nginx.ingress.kubernetes.io/proxy-body-size: &lt;value&gt;m
example:
$ nginx.ingress.kubernetes.io/proxy-body-size: 3m</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_running_on_azure"><a class="anchor" href="#_running_on_azure"></a>Running on Azure</h2>
<div class="sectionbody">
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
This section has been compiled from community feedback. If you find that required settings are missing from this section or that any items described here are outdated or inaccurate, please <a href="https://github.com/inception-project/inception/discussions">help us updating the section</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are various options for deploying INCEpTION in the cloud. This section will not discuss all of them. Instead refer to the other sections regarding running as a JAR (on a VM), via Docker, etc.</p>
</div>
<div class="paragraph">
<p>However, depending on the cloud you are running on, there may be special considerations to take or options to set. These are described here with respect to the Microsoft Azure cloud.</p>
</div>
<div class="sect2">
<h3 id="_using_mysql_on_the_azure_cloud"><a class="anchor" href="#_using_mysql_on_the_azure_cloud"></a>Using MySQL on the Azure cloud</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please read the generic <a href="#sect_mysql">MySQL</a> setup before reading this section.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The default settings of MySQL instances on the Azure cloud may differ from the defauls for local installations.</p>
</div>
<div class="paragraph">
<p>Make sure that the option <a href="https://dev.mysql.com/doc/refman/8.0/en/create-table-gipks.html"><code>sql_generate_invisible_primary_key</code></a> is turned <strong>off</strong>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_a_mounted_azure_file_system"><a class="anchor" href="#_using_a_mounted_azure_file_system"></a>Using a mounted Azure file system</h3>
<div class="paragraph">
<p>Mounted file systems in the Azure clouds are known to maintain slightly inaccurate timestamps. This can in particular lead to annotators getting an error message the there have been concurrent modifications to a document and that they need to re-open the document before they can continue to annotate.</p>
</div>
<div class="paragraph">
<p>To compensate for this inaccuracy, you can use the <a href="#sect_settings_cas_storage"><code>cas-storage.file-system-timestamp-accuracy</code></a> option in your <code>settings.properties</code> file.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_unsupervised_installation"><a class="anchor" href="#_unsupervised_installation"></a>Unsupervised installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To perform an unsupervised installations of INCEpTION, you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>set a custom password for the default <code>admin</code> account</p>
</li>
<li>
<p>create the <code>admin</code> account with the <code>ROLE_REMOTE</code></p>
</li>
<li>
<p>enable/disable telemetry support to avoid the admin being asked on the first login</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Custom default admin user/password</div>
<p>To set a custom default admin user name and password, add the following line to the <code>settings.properties</code>
file. If no custom user name is set, the default <code>admin</code> is used.:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>security.default-admin-username=mastermind
security.default-admin-password={bcrypt}XXXXXX</code></pre>
</div>
</div>
<div class="paragraph">
<p>To obtain an encrypted password, you can use tools such as the
<a href="https://bcrypt-generator.com">online bcrypt generator</a>. Replace the XXXXXX in the example
above with the output from the tool - keep the <code>{bcrypt}</code> prefix!</p>
</div>
<div class="paragraph">
<p>You could also create a user in INCEpTION, set the password you desire, and then look at the
database table <code>users</code> (easiest if you are using MariaDB or MySQL).</p>
</div>
<div class="paragraph">
<div class="title">Enable remote API access for the admin user</div>
<p>If you want your installation to be remotely manageable directly from the outset using the <code>admin</code>
account, you can add the following line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>security.default-admin-remote-access=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mind that the remote API still needs to be enabled separately.</p>
</div>
<div class="paragraph">
<div class="title">Enable/disable telemetry</div>
<p>You can use either of the following two lines to enable or disable telemetry submission and avoid
the <code>admin</code> user being asked about telemetry submission on the first login.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>telemetry.auto-respond=ACCEPT
telemetry.auto-respond=REJECT</code></pre>
</div>
</div>
</div>
</div>
<h1 id="sect_security_authentication" class="sect0"><a class="anchor" href="#sect_security_authentication"></a>Authentication</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section describes the different authentication mechanisms supported by INCEpTION.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A user can only log in through one mechanism, either as a local user or an external user.
      If you are using SAML/OAuth2, then the users are bound to one particular IdP. If a user with the same
      name tries to log in via another mechanism or IdP, the login will be rejected. If you plan to use
      multiple login mechanisms or IdPs at the same time, you must ensure that the user IDs are unique
      across all the mechanisms and IdPs or that a given user always uses the same login mechanism.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_security_authentication_oauth2"><a class="anchor" href="#sect_security_authentication_oauth2"></a>OAuth2 authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>INCEpTION can authenticate a user against a OAuth2/OIDC-compatible identity provider. OAuth2/OIDC providers can be configured alongside the usual form-based login and SAML2.
It is <strong>not</strong> compatible with the <a href="#sect_security_authentication_preauth">external pre-authentication</a> and does not require setting the <code>auth.mode</code> property.</p>
</div>
<div class="paragraph">
<p>The following example configuration declares an OAuth2 service connection named <code>inception-client-oauth</code>
which uses a Keycloak instance configured for OAuth2 running at
<code><a href="http://localhost:8180/realms/inception-demo" class="bare">http://localhost:8180/realms/inception-demo</a></code>. The OAuth2 support of INCEpTION should work with
any OAuth2/OIDC-compatible identity provider. For more details, please
refer to the <a href="https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorization-grants.html">Spring Security OAuth2 documentation</a>.</p>
</div>
<div class="listingblock">
<div class="title">Example: Authenticate against a local Keycloak</div>
<div class="content">
<pre>spring.security.oauth2.client.registration.inception-client-oauth.client-name=Keycloak
spring.security.oauth2.client.registration.inception-client-oauth.client-id=inception-client-oauth
spring.security.oauth2.client.registration.inception-client-oauth.client-secret=ENCRYPTED_CLIENT_SECRET
spring.security.oauth2.client.registration.inception-client-oauth.scope=openid, profile
spring.security.oauth2.client.registration.inception-client-oauth.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.inception-client-oauth.redirect-uri=http://localhost:8080/login/oauth2/code/inception-client-oauth
spring.security.oauth2.client.provider.inception-client-oauth.issuer-uri=http://localhost:8180/realms/inception-demo
spring.security.oauth2.client.provider.inception-client-oauth.user-name-attribute=preferred_username</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The following instructions run Keycloak in development mode. This is <strong>not</strong> meant for
      production, only for testing. For how to properly set up a production-level Keycloak server, please
      refer to the official documentation of Keycloak.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you want to try this with a local testing instance of Keycloak, you can do this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Download <a href="https://www.keycloak.org">Keycloak</a></p>
</li>
<li>
<p>Run it using <code>./kc.sh start-dev --http-port 8180</code></p>
</li>
<li>
<p>Configure a new realm called <code>inception-demo</code></p>
</li>
<li>
<p>Define a new client <code>inception-client-oauth</code> and set the <strong>Valid redirection URI</strong> to <code><a href="http://localhost:8080/login/oauth2/code/inception-client-oauth" class="bare">http://localhost:8080/login/oauth2/code/inception-client-oauth</a></code>.</p>
</li>
<li>
<p>Replace the <code>ENCRYPTED_CLIENT_SECRET</code> in the example configuration above with the client secret from
the <strong>Credentials</strong> tab of the client in Keycloak.</p>
</li>
<li>
<p>Add a new user in the <strong>Manage users</strong> area in Keycloak.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When you restart INCEpTION and access the login page now, it should offer a login option called
<strong>Keycloak</strong>. You can change the label of that option by changing the
<code>security.oauth2.client.registration.inception-client-oauth.client-name</code> setting.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_security_authentication_saml2"><a class="anchor" href="#sect_security_authentication_saml2"></a>SAML authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>INCEpTION can authenticate a user against a SAML2-compatible identity provider. SAML
providers can be configured alongside the usual form-based login and OAuth2.
It is <strong>not</strong> compatible with the <a href="#sect_security_authentication_preauth">external pre-authentication</a>
and does not require setting the <code>auth.mode</code> property.</p>
</div>
<div class="paragraph">
<p>The following example configuration declares a SAML2 service connection named <code>inception-client-saml</code>
which uses a Keycloak instance configured for SAML2 running at
<code><a href="http://localhost:8180/realms/inception-demo" class="bare">http://localhost:8180/realms/inception-demo</a></code>. The SAML support of INCEpTION should work with
any SAML2-compatible identity provider. For more details, please
refer to the <a href="https://docs.spring.io/spring-security/reference/servlet/saml2/index.html">Spring Security SAML2 documentation</a>.</p>
</div>
<div class="listingblock">
<div class="title">Example: Authenticate against a local Keycloak</div>
<div class="content">
<pre>spring.security.saml2.relyingparty.registration.inception-client-saml.assertingparty.entity-id=http://localhost:8180/realms/inception-demo
spring.security.saml2.relyingparty.registration.inception-client-saml.assertingparty.verification.credentials[0].certificate-location=file:/srv/inception/keycloak-saml-idp.crt
spring.security.saml2.relyingparty.registration.inception-client-saml.assertingparty.singlesignon.url=http://localhost:8180/realms/inception-demo/protocol/saml
spring.security.saml2.relyingparty.registration.inception-client-saml.assertingparty.singlesignon.sign-request=false</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The following instructions run Keycloak in development mode. This is <strong>not</strong> meant for
      production, only for testing. For how to properly set up a production-level Keycloak server, please
      refer to the official documentation of Keycloak.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you want to try this with a local testing instance of Keycloak, you can do this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Download <a href="https://www.keycloak.org">Keycloak</a></p>
</li>
<li>
<p>Run it using <code>./kc.sh start-dev --http-port 8180</code></p>
</li>
<li>
<p>Configure a new realm called <code>inception-demo</code></p>
</li>
<li>
<p>Define a new client and in the client wizard set</p>
<div class="ulist">
<ul>
<li>
<p>Client ID: <code><a href="http://localhost:8080/saml2/service-provider-metadata/inception-client-saml" class="bare">http://localhost:8080/saml2/service-provider-metadata/inception-client-saml</a></code></p>
</li>
<li>
<p>Client protocol: <code>saml</code></p>
</li>
<li>
<p>Save the client</p>
</li>
</ul>
</div>
</li>
<li>
<p>Set <strong>Valid redirection URI</strong> to <code><a href="http://localhost:8080/login/saml2/sso/*" class="bare">http://localhost:8080/login/saml2/sso/*</a></code>.</p>
</li>
<li>
<p>Set <strong>Client signature Required</strong> to <code>Off</code></p>
</li>
<li>
<p>Add a new user in the <strong>Manage users</strong> area in Keycloak.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>keycloak-saml-idp.crt</code> file needs to be constructed by you. Once the configuration is complete
in Keycloak, you can access <code><a href="http://localhost:8180/realms/inception-demo/protocol/saml/descriptor" class="bare">http://localhost:8180/realms/inception-demo/protocol/saml/descriptor</a></code> to obtain
an XML file which contains the certificate in the <code>ds:X509Certificate</code> element. You need to copy this
certificate string (usually staring with <code>MIIC</code> into a text file with the following structure:</p>
</div>
<div class="listingblock">
<div class="title">Certificate file structure</div>
<div class="content">
<pre>-----BEGIN CERTIFICATE-----
MIIC...
-----END CERTIFICATE-----</pre>
</div>
</div>
<div class="paragraph">
<p>Save this file at the location indicated by the <code>&#8230;&#8203;.verification.credentials.certificate-location</code> key,
(here <code>/srv/inception/keycloak-saml-idp.crt</code>).</p>
</div>
<div class="paragraph">
<p>When you restart INCEpTION and access the login page now, it should offer a login option called
<strong>inception-client-saml</strong>. The SAML authentication does not allow defining the provider name shown on the login page independently from the registration ID. The registration ID (here <code>inception-client-saml</code>) is defined in between the <code>registration</code>
and <code>assertingparty</code> parts of the configuration keys.</p>
</div>
<div class="sect2">
<h3 id="_client_certificate_optional"><a class="anchor" href="#_client_certificate_optional"></a>Client certificate (optional)</h3>
<div class="paragraph">
<p>You can provide INCEpTION with a certificate so the IdP can verify that authentication requests are
really coming from it.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First, we generate a certificate and a key file using (we are using a 2048-bit key here, but you might care
to use a longer key)</p>
<div class="listingblock">
<div class="content">
<pre>openssl req -x509 -newkey rsa:2048 -keyout /srv/inception/inception.key -out /srv/inception/inception.crt -sha256 -days 365 -nodes -subj "/CN=inception-demo"</pre>
</div>
</div>
</li>
<li>
<p>In order to upload these, both need to be in one PEM file, so we concatenate the two files:</p>
<div class="listingblock">
<div class="content">
<pre>cat /srv/inception/inception-saml.key /srv/inception/inception-saml.crt &gt; /srv/inception/inception-saml.pem</pre>
</div>
</div>
</li>
<li>
<p>Open the previously defined client in Keycloak (e.g. <code><a href="http://localhost:8080/saml2/service-provider-metadata/inception-client-saml" class="bare">http://localhost:8080/saml2/service-provider-metadata/inception-client-saml</a></code>)</p>
</li>
<li>
<p>Set <strong>Client signature Required</strong> to <code>On</code> and save the settings</p>
</li>
<li>
<p>Now a new tab <strong>Keys</strong> should appear at the top. Switch to it.</p>
</li>
<li>
<p>Click on <strong>Import</strong> and select <strong>PEM</strong> as the format, then upload the file <code>/srv/inception/inception.pem</code></p>
</li>
<li>
<p>Enable request signing in the <code>settings.properties</code> file</p>
<div class="listingblock">
<div class="content">
<pre>spring.security.saml2.relyingparty.registration.inception-client-saml.assertingparty.singlesignon.sign-request=true</pre>
</div>
</div>
</li>
<li>
<p>Configure the certificates for INCEpTION to sign its requests</p>
<div class="listingblock">
<div class="content">
<pre>spring.security.saml2.relyingparty.registration.inception-client-saml.signing.credentials[0].private-key-location=file:/srv/inception/inception-saml.key
spring.security.saml2.relyingparty.registration.inception-client-saml.signing.credentials[0].certificate-location=file:/srv/inception/inception-saml.crt</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_security_auto_authentication_login"><a class="anchor" href="#sect_security_auto_authentication_login"></a>Auto-login</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When configuring the application for SAML/OAuth2, the user will still be required to choose an identity
provider via the login page (and is also given the opportunity to log in via form-based login there).</p>
</div>
<div class="paragraph">
<p>If you would like to automatically login through a particular SAML identity provider, you
can configure this by setting the <code>security.auto-login</code> property to the registration ID of the
respective provider that you configured using the <code>spring.security.saml2.relyingparty.registration&#8230;&#8203;.</code> or <code>spring.security.oauth2.client&#8230;&#8203;</code> properties.</p>
</div>
<div class="paragraph">
<p>This setting is useful for single-sign-on scenarios where only a single identity provider is used.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.login.auto-login</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Auto-login using given identity provider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;none&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>inception-client</code> (cf. example above)</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In case it may be necessary to bypass the auto-login, e.g. to allow signing in via credentials,
      navigate to <code>&#8230;&#8203;/login.html?skipAutoLogin=true</code>. Make sure to do this in a fresh browser session that is
      not yet logged into the application.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_security_authentication_preauth"><a class="anchor" href="#sect_security_authentication_preauth"></a>External pre-authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>INCEpTION can be used in conjunction with header-based external per-authentication. In this mode,
the application looks for a special HTTP header (by default <code>remote_user</code>) and if that header exists,
it is taken for granted that this user has been authenticated. The application will check its internal
database if a user by the given name exists, otherwise it will create the user.</p>
</div>
<div class="paragraph">
<p>Pre-authentication can be enabled by setting the property <code>auth.mode</code> to <code>preauth</code>. When enabling
pre-authentication mode, the default roles for new users can be controlled using the
<code>auth.preauth.newuser.roles</code> property. The <code>ROLE_USER</code> is always added, even if not specified
explicitly. Adding also the role <code>ROLE_PROEJCT_CREATOR</code> allows all auto-created users also to
create their own projects.</p>
</div>
<div class="paragraph">
<p>Since the default administrator user is not created in pre-authentication, it is useful to also
declare at least one user as an administrator. This is done through the property
<code>auth.user.&lt;username&gt;.roles</code> where <code>&lt;username&gt;</code> must be replaced with the name of the user.
The example below shows how the user <strong>Franz</strong> is given administrator permissions.</p>
</div>
<div class="paragraph">
<p>In order to log out, one can specify an URL to redirect to after the session is cleared on the side
of INCEpTION.</p>
</div>
<div class="listingblock">
<div class="title">Example: Authenticate using the <code>remote_user</code> header, new users can create projects, user <strong>Franz</strong> is always admin.</div>
<div class="content">
<pre>auth.mode                     = preauth
auth.preauth.header.principal = remote_user
auth.preauth.newuser.roles    = ROLE_PROJECT_CREATOR
auth.user.Franz.roles         = ROLE_ADMIN</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The roles specified through <code>auth.preauth.newuser.roles</code> are saved in the database when a
      user logs in for the first time and can be changed after creation through the user interface.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The roles added through <code>auth.user.&lt;username&gt;.roles</code> properties are <strong>not</strong> saved in the
      database and <strong>cannot</strong> be edited through the user interface.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>auth.mode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>database</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>preauth</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>auth.preauth.header.principal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Principal header</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remote_user</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>some other header</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>auth.preauth.newuser.roles</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default roles for new users (comma separated)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;none&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ROLE_PROJECT_CREATOR</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>auth.preauth.logoutUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL to call after logging out to also sign out of external authentication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;none&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://your-idp.com/Shibboleth.sso/Logout" class="bare">https://your-idp.com/Shibboleth.sso/Logout</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>auth.user.<em>&lt;username&gt;</em>.roles</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Extra roles for user (comma separated)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>&lt;none&gt;</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ROLE_ADMIN</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sect_security_csp"><a class="anchor" href="#sect_security_csp"></a>Content Security Policy (CSP)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to adjust the Content Security Policy (CSP) of INCEpTION.
This may be necessary to enable/disable the ability to display images or media (audio/video) embedded to or referenced
from documents.</p>
</div>
<div class="paragraph">
<p>INCEpTION by default allows loading content from its own host (<code>'self'</code>) and content embedded into the documents themselves (<code>data:</code>).
Additional sources can be added using the properties described below.</p>
</div>
<div class="paragraph">
<p>The Content Security Policy (CSP) are sent to the browser and interpreted by the browser.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Content Security Policy (CSP) properties</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.csp.allowed-image-sources</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URLs from which images can be loaded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>none</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://upload.wikimedia.org" class="bare">https://upload.wikimedia.org</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.csp.allowed-media-sources</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URLs from which media (audio/video) can be loaded</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>none</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://upload.wikimedia.org" class="bare">https://upload.wikimedia.org</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.csp.allowed-frame-ancestors</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URLs which can embed INCEpTION in IFrames</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>none</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://my-domain.com/embedding-application" class="bare">https://my-domain.com/embedding-application</a></code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Related to the CSP settings are the content policy setting for the HTML-based annotation editors and related formats such as MHTML or HTML (ZIP).
These allow enabling/disabling the filtering of images, audio, video and other related HTML tags.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>NONE</code> configures the content filter to strip out the respective element while rendering. It will not reach the browser.</p>
</li>
<li>
<p><code>LOCAL</code> configures the content filter to allow the element to only access content embedded in the document. This allows
accessing content embedded in MHTML or HTML (ZIP) files.</p>
</li>
<li>
<p><code>ANY</code> disables the filter for this element and allows any content to be loaded (CORS still applies).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the <code>src</code> attribute of the <code>img</code>, <code>audio</code> and <code>video</code> elements must be used to reference the content.
Child <code>source</code> elements inside <code>img</code>, <code>audio</code> and <code>video</code> are not supported.</p>
</div>
<div class="paragraph">
<p>These filters are applied on the server side.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default, loading content embedded in documents is allowed so that users of INCEpTION can easily get started
      working with multi-modal documents. However, security-conscious system administrators may wish to enable all the
      <code>block-XXX</code> properties and to set the allowed sources to <code>NONE</code>.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Editor content policy properties</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui.external.block-img</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to remove HTML <code>&lt;img&gt;</code> tags during rendering.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui.external.allow-img-source</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where to allow loading images from.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOCAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NONE</code>, <code>ANY</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui.external.block-audio</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to remove HTML <code>&lt;audio&gt;</code> tags during rendering.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui.external.allow-audio-sources</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where to allow loading audio files from.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOCAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NONE</code>, <code>ANY</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui.external.block-video</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to remove HTML <code>&lt;video&gt;</code> tags during rendering.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui.external.allow-video-sources</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where to allow loading video files from.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LOCAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NONE</code>, <code>ANY</code></p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
<h1 id="sect_logging" class="sect0"><a class="anchor" href="#sect_logging"></a>Logging</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>INCEpTION comes with a default logging configuration that should serve well in a normal
production environment, either on a server or running as a desktop application. However, for
more advanced scenarios, it may be useful to customize the logging configuration.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_set_specific_log_levels"><a class="anchor" href="#_set_specific_log_levels"></a>Set specific log levels</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Maybe you do not want to user a completely custom logging configuration and only wish to get a bit
more information in a particular part of the application. In this case, you can specify the log
level for particular packages or classes either by declaring logging properties either as system
property (<code>-D</code>) argument when starting INCEpTION or by adding them to the <code>settings.properties</code>
file. For example, if you wanted to get more information on the authentication process, you could
use the following properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">logging.level.org.springframework.security=TRACE
logging.level.de.tudarmstadt.ukp.inception.security=TRACE</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_custom_logging"><a class="anchor" href="#_custom_logging"></a>Custom logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A custom logging configuration can be specified when starting up INCEpTION using the parameter
<code>-Dlogging.config=/path/to/your/log4.xml</code>. This should be a standard Log4J2 configuration file.
A good starting point is the default configuration used by INCEpTION which can be found in <a href="https://github.com/inception-project/inception/blob/main/inception/inception-app-webapp/src/main/resources/log4j2-spring.xml">our code repository</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_logging_in_json_format"><a class="anchor" href="#_logging_in_json_format"></a>Logging in JSON format</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you would like to integrate the logging output of INCEpTION with something like LogStash and
Kibana, you may want log output to be in a properly interpretable JSON format, instead of the usual
plain text format. INCEpTION comes with several JSON configurations that are compatible with
popular tools like LogStash and others. You can activate it by adding the following sections to a custom <code>log4j2.xml</code> file in the <code>Appenders</code> sections and in the <code>Root</code> logger.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">&lt;Configuration ...&gt;
  &lt;!-- ... --&gt;

  &lt;Appenders&gt;
    &lt;!-- ... --&gt;

    &lt;RollingFile name="RollingFileAppender" fileName = "logs/inception.log"
                 filePattern="app-%d{MM-dd-yy-HH-mm-ss}-%i.log.gz"&gt;
        &lt;JsonTemplateLayout eventTemplateUri="classpath:LogstashJsonEventLayoutV1.json"/&gt;
      &lt;Policies&gt;
        &lt;SizeBasedTriggeringPolicy size = "20 MB" /&gt;
      &lt;/Policies&gt;
    &lt;/RollingFile&gt;

    &lt;!-- ... --&gt;
  &lt;/Appenders&gt;

  &lt;Loggers&gt;
    &lt;!-- ... --&gt;

    &lt;Root level="warn"&gt;
      &lt;!-- ... --&gt;

      &lt;AppenderRef ref="RollingFileAppender" /&gt;
    &lt;/Root&gt;
  &lt;/Loggers&gt;&lt;/Configuration&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following bundled default configurations that are part of the <code>log4j-layout-template-json</code> library
are available in INCEpTION:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>EcsLayout.json</code></p>
</li>
<li>
<p><code>GcpLayout.json</code></p>
</li>
<li>
<p><code>GelfLayout.json</code></p>
</li>
<li>
<p><code>JsonLayout.json</code></p>
</li>
<li>
<p><code>LogstashJsonEventLayoutV1.json</code></p>
</li>
<li>
<p><code>StackTraceElementLayout.json</code></p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<h1 id="sect_monitoring" class="sect0"><a class="anchor" href="#sect_monitoring"></a>Monitoring</h1>
<div class="sect1">
<h2 id="sect_health_check"><a class="anchor" href="#sect_health_check"></a>Health check</h2>
<div class="sectionbody">
<div class="paragraph">
<p>INCEpTION offers a health-checking endpoint at <code>&#8230;&#8203;/actuator/health</code>. It provides a JSON response indicating
whether the application is up and running.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
   "status":"UP",
   "components":{
      "db":{
         "status":"UP",
         "details":{
            "database":"MariaDB",
            "validationQuery":"isValid()"
         }
      },
      "diskSpace":{
         "status":"UP",
         "details":{
            "total": ...,
            "free": ...,
            "threshold": ...,
            "exists":true
         }
      },
      "ping":{
         "status":"UP"
      }
   }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_metrics"><a class="anchor" href="#_metrics"></a>Metrics</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
to make the metrics available <code>spring.jmx.enabled=true</code> and <code>monitoring.metrics.enabled=true</code>  must be set in
       the <code>settings.properties</code> file  (see <a href="#sect_home_folder">Application home folder</a> on this file)..
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>We expose some metrics of the running INCEpTION instance via JMX. These are currently</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the number of active as well as enabled users</p>
</li>
<li>
<p>the overall number of documents</p>
</li>
<li>
<p>the number of enabled recommenders</p>
</li>
<li>
<p>the number of annotation documents i.e. documents being annotated per user</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_setting_up_metrics_exporter"><a class="anchor" href="#_setting_up_metrics_exporter"></a>Setting up metrics exporter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To export the metrics so they can be queried by the monitoring solution <a href="https://prometheus.io/">Prometheus</a>,
you can e.g. use <a href="https://github.com/prometheus/jmx_exporter">the JMX exporter</a> as a java agent.</p>
</div>
<div class="paragraph">
<p>The JMX exporter can be run as a .jar file that should be placed together with its <code>config.yml</code>
file next to the INCEpTION .jar file. An example <code>config.yml</code> file that exposes metrics from
INCEpTION but not webanno brat metrics (metrics associated with brat rendering) and conforms JMX metric
names to <a href="https://prometheus.io/docs/practices/naming/">Prometheus Naming conventions</a> is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">ssl: false
whitelistObjectNames: ["de.tudarmstadt.ukp.inception.recommendation.metrics:*",
"de.tudarmstadt.ukp.clarin.webanno.api.dao.metrics:*", "de.tudarmstadt.ukp.clarin.webanno.security.metrics:*"]
blacklistObjectNames: ["de.tudarmstadt.ukp.clarin.webanno.brat.metrics:*"]
lowercaseOutputName: true
lowercaseOutputLabelNames: true
rules:
  - pattern: 'de.tudarmstadt.ukp.inception.recommendation.metrics&lt;name=recommendationMetricsImpl, type=RecommendationMetricsImpl&gt;&lt;&gt;(\w+): (\d+)'
    name: inception_$1
    value: $2
    help: "Inception metric $1"
    type: GAUGE
    attrNameSnakeCase: true

  - pattern: 'de.tudarmstadt.ukp.clarin.webanno.([\.\w]+).metrics&lt;name=(\w+), type=(\w+)&gt;&lt;&gt;(\w+): (\d+)'
    name: webanno_$4
    value: $5
    help: "Inception metric $4"
    type: GAUGE
    attrNameSnakeCase: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following line will run the JMX exporter for the JVM that runs the inception.jar.
The exporter will expose the metrics on the http-endpoint <em>localhost:9404</em>.
Make sure to use a port, 9404 in this case, that is not open to the public
(only to the local network that your Prometheus instance runs in).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">$ java -javaagent:./jmx_prometheus_javaagent-0.13.0.jar=9404:config.yaml -jar inception.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>The JMX exporter will also automatically expose JVM metrics in the <code>java.lang</code> namespace
which can be used to e.g. monitor memory usage:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>jvm_memory_bytes_used</em>: Used bytes of a given JVM memory area.</p>
</li>
<li>
<p><em>jvm_memory_bytes_committed</em>: Committed (bytes) of a given JVM memory area. This means (opposed to max memory)
that this memory is available to the JVM.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and others.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sentry"><a class="anchor" href="#_sentry"></a>Sentry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to use Sentry as an error tracker, you will need to provide the Sentry SDK your Sentry project&#8217;s Data Source Name (DSN) and other settings in INCEpTION&#8217;s <code>settings.properties</code> file. The Sentry SDK will be deactivated unless a DSN is provided.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sentry.dsn</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The DSN tells the Sentry SDK where to send events.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://examplePublicKey@o0.ingest.sentry.io/0" class="bare">https://examplePublicKey@o0.ingest.sentry.io/0</a> <a href="https://examplePublicKey@sentry.your-org.com/N" class="bare">https://examplePublicKey@sentry.your-org.com/N</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sentry.environment</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the application environment that will be sent with each event.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">production</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">prod</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sentry.enable-tracing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable transaction tracing used for performance monitoring.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sentry.traces-sample-rate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adjust the procentage of transaction sent to Sentry.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sentry.send-default-pii</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By default, the Sentry SDK do not purposefully send Personally Identifiable Information (PII) to your Sentry server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">off</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">on</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>By default, only unhandled exceptions are sent to Sentry. This behavior can be tuned through configuring the <code>sentry.exception-resolver-order</code> property. For example, setting it to <code>-2147483647</code> (the value of <code>org.springframework.core.Ordered#HIGHEST_PRECEDENCE</code>) ensures exceptions that have been handled by exception resolvers with higher order are sent to Sentry - including ones handled by <code>@ExceptionHandler</code> annotated methods.</p>
</div>
<div class="paragraph">
<p>More option that can be overwritten are listed in <a href="https://docs.sentry.io/platforms/java/guides/spring-boot/configuration/">the official Sentry SDK ducumentation</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scheduling"><a class="anchor" href="#_scheduling"></a>Scheduling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The default schedule for pulling of Prometheus is 10s, however it is necessary to make this a longer
interval to avoid overwhelming your INCEpTION instance with requests for metrics.
You will need to do this in your Prometheus config file.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<h1 id="sect_upgrade" class="sect0"><a class="anchor" href="#sect_upgrade"></a>Upgrading</h1>
<div class="sect1">
<h2 id="_upgrade_paths"><a class="anchor" href="#_upgrade_paths"></a>Upgrade paths</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are in principle three ways to upgrade INCEpTION to a new version:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>In-place update</strong> - in this scenario, you simply stop the application, replace the existing
INCEpTION JAR file with the new version, and then start the application again. The benefit
of this approach is, that is is very fast. The downside is, that in case anything goes wrong, you
cannot simply go back to using the old version. You need to make sure that you have a proper
backup of the application home folder and the database (if you use an external database) because
the in-place update might migrate your data and after you might no longer be able to use it with
an older version (e.g. if you replace the JAR again with an older version). The steps for
performing an in-place upgrade are specifed in the respective section below.</p>
</li>
<li>
<p><strong>Migrating to a fresh installation</strong> - in this scenario, you would set up a fresh installation
of the new INCEpTION version using a different application home folder and a different database
than your existing installation. After that, you would move the data of the old installation over
to the new installation, e.g. by copying the contents of the old application home/database over
into the new ones. When you start the fresh installation then, it will find the data you just
copied over, automatically perform a database migration if there were any changes in the database
schema, and then start up. The benefit of this approach is that in case anything does wrong during
the upgrade or in case there is a critical problem with the new version, you can always go back
to using the old installation and e.g. retry the update again at a later time. The steps for
setting up a new instance are specified in the installation instructions. The steps for copying
the data over to the new instance are the same as for performing a backup.</p>
</li>
<li>
<p><strong>Copying projects to a fresh installation</strong> - in this scenario, you would export all projects
from your existing installation. Then you would set up a new installation using a fresh
application home folder/database. Finally, you would import all the exported projects into this
new installation. The only situation where this type of upgrade procedure is necessary is, when
you want to change the database backend, e.g. if you want to switch from an embedded database to
an external database. Otherwise, there is typically no benefit in following this approach.
It would only be necessary if a new INCEpTION release would completely break its database
schema and not offer an automatic migration. This typically does never happen since INCEpTION
has support for automatic database migrations these days.  Also note that none of the user&#8217;s
passwords are migrated in this way. When you import the projects in the new installation, you need
to enable the <strong>import missing users</strong> option and after all projects have been imported, you need
to go through each of the users, enable them, set their roles and set a new password for them.
Or alternatively, you could copy the contents of the database tables <code>users</code> and <code>authorities</code>
from the old database into the new one.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The release notes generally indicate that it is possible to perform an in-place upgrade of the
application. However, before doing an upgrade, it is recommended to create a backup of the
application and data to allow coming back to a working system if case of a problem during the
upgrade. Mind that the upgrade is only completed once the new version has successfully started
because during startup, the application may make changes to the database schema or to the data on
disk.</p>
</div>
<div class="paragraph">
<p>Also, for certain versions there might be special considerations to be aware of when performing the
upgrade. Always be sure to check the section below <strong>as well as the release notes</strong> of every version
between the version you are upgrading from up to and including the version you are upgrading to.</p>
</div>
<div class="sect2">
<h3 id="_database_upgrades"><a class="anchor" href="#_database_upgrades"></a>Database upgrades</h3>
<div class="paragraph">
<p>If - as recommeded - you are using a dedicated database (e.g. MariaDB), you should also occasinally upgrade that.
If you are obtaining a new <a href="#sect_docker_compose">Docker Compose</a>, it may well include a new database version.
Please refer to the upgrade documentation of your database (e.g. <a href="https://mariadb.com/kb/en/upgrading/">MariaDB upgrade</a>) or to the <a href="#sect_docker_compose">Docker Compose section</a> in this manual for more information.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_system_level_backup"><a class="anchor" href="#_system_level_backup"></a>System-level backup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The system-level backup procedure is directed mainly towards server administrators. Project managers can create a project-level backup from the project settings user interface.</p>
</div>
<div class="paragraph">
<p>INCEpTION stores some data on the file system in its <a href="#sect_home_folder">application home folder</a> and other data in a database.</p>
</div>
<div class="paragraph">
<p>It is recommended to make backups while INCEpTION is not running to ensure that the data in the backup is in a consistent state.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Make sure that you can actually re-create a working installation by restoring your backup.
      E.g. restore your database export into a fresh database and point a new INCEpTION installation
      at using your application home folder copy and the restored database and then start the application and check
      that everything is there and working. A backup which cannot be successfully restored is worthless.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_file_system_backup"><a class="anchor" href="#_file_system_backup"></a>File system backup</h3>
<div class="paragraph">
<p>To create a backup your INCEpTION <a href="#sect_home_folder">application home folder</a> you can just copy the folder to another location or create a ZIP archive from it.</p>
</div>
<div class="paragraph">
<p>This backup will contain amongst other things the actual annotated data.</p>
</div>
<div class="paragraph">
<p>To keep downtime low while you are preparing the backup, consider using a copy tool that supports incremental updates such as <a href="https://en.wikipedia.org/wiki/Rsync">rsync</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_database_backups"><a class="anchor" href="#_database_backups"></a>Database backups</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are not using an external database, INCEpTION is using an embedded database that stores its data in the <a href="#sect_home_folder">application home folder</a>. In this case, maintaining a backup of that folder is sufficient and you can skip this section. However, if you are using an external database like MariaDB, it is essential to also maintain backups of that database!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you are using an external database like MariaDB, make a backup of your INCEpTION database,
  e.g. using the <a href="https://mariadb.com/kb/en/backup-and-restore-overview/">mariadb-dump</a> command.</p>
</div>
<div class="paragraph">
<p>This backup will contain infomation about projects, documents, users, and all other structured metadata maintained by INCEpTION. It will <strong>not</strong> contain the actual annotated data which is stored on the file system!</p>
</div>
<div class="paragraph">
<p>Assuming you set up the database according to the instructions in this manual, you can use <code>mariadb-dump</code> to create a backup like this:</p>
</div>
<div class="listingblock">
<div class="title">Creating a database backup</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ mariadb-dump inception &gt; inception-backup.sql</code></pre>
</div>
</div>
<div class="paragraph">
<p>Restoring the backup is similary. Please make sure that the database into which you restore the backup has been set up according to the instructions in this manual. This is particularly important if you restore the database to a new system.</p>
</div>
<div class="listingblock">
<div class="title">Restoring a database backup</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ mariadb inception &lt; inception-backup.sql</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_performing_an_in_place_upgrade"><a class="anchor" href="#_performing_an_in_place_upgrade"></a>Performing an in-place upgrade</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Stop the INCEpTION service</p>
</li>
<li>
<p>Replace the <code>inception.jar</code> file with the new version</p>
</li>
<li>
<p>Ensure that the file has the right owner/group (usually <code>www-data</code>)</p>
</li>
<li>
<p>Start the INCEpTION service again</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_upgrade_notes"><a class="anchor" href="#_upgrade_notes"></a>Upgrade notes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section summarizes important upgrade notes from the release history of INCEpTION. If you upgrade from any version <code>X</code>, carefully read all the upgrade notes for versions later than <code>X</code>. In particular, if any of the upgrade notes mentions that an intermediate upgrade to that version must be made before going to a higher version, then first perform all required intermediate upgrades in order.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is a good idea to back up your installation and data before an upgrade. Also make sure that
      you can actually re-create a working installation by restoring your backup. A backup which cannot be
      successfully restored is worthless.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_inception_34_0"><a class="anchor" href="#_inception_34_0"></a>INCEpTION 34.0</h3>
<div class="sect3">
<h4 id="_database_schema_changes"><a class="anchor" href="#_database_schema_changes"></a>Database schema changes</h4>
<div class="paragraph">
<p>This version makes various changes to the database schema in order to improve compatibiltiy with
different database systems. This entails that after running this version, you cannot easily downgrade
to an older version of INCEpTION anymore. If you need to downgrade, you need to restore a
backup from before the upgrade or manually revert the database schema changes.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_inception_33_0"><a class="anchor" href="#_inception_33_0"></a>INCEpTION 33.0</h3>
<div class="sect3">
<h4 id="_mariadb_upgrade_in_the_docker_compose_file"><a class="anchor" href="#_mariadb_upgrade_in_the_docker_compose_file"></a>MariaDB upgrade in the Docker Compose file</h4>
<div class="paragraph">
<p>The MariaDB container that is configured in the example file will now set the environment
variable <code>MARIADB_AUTO_UPGRADE</code> to <code>1</code> to have MariaDB automatically upgrade its internal tables when encountering a database
produced with an earlier version of MariaDB (see <a href="https://hub.docker.com/_/mariadb">MariaDB Environment Variables</a>.
If you do not want this behavior, be sure to remove this settings from the compose file.</p>
</div>
<div class="paragraph">
<p>The MariaDB container is also upgraded to the current LTS version 11.4 in the compose file. If you are not using the
auto-upgrade behavior mentioned above, you need to manually perform the <a href="https://mariadb.com/kb/en/upgrading/">MariaDB upgrade</a> procedure.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_inception_32_0"><a class="anchor" href="#_inception_32_0"></a>INCEpTION 32.0</h3>
<div class="paragraph">
<p>If you are using Docker and override the memory usage of INCEpTION via the <code>JAVA_OPTS</code> environment
variable, then you should remove the memory settings from that variable an instead add them to <code>JAVA_MEM_OPTS</code>
to ensure that you actually override the default memory settings provided by INCEpTION.</p>
</div>
</div>
<div class="sect2">
<h3 id="_inception_25_0"><a class="anchor" href="#_inception_25_0"></a>INCEpTION 25.0</h3>
<div class="sect3">
<h4 id="_manual_intervention_for_external_pre_authentication_users"><a class="anchor" href="#_manual_intervention_for_external_pre_authentication_users"></a>Manual intervention for external pre-authentication users</h4>
<div class="paragraph">
<p>If you use the external pre-authentication feature of INCEpTION (i.e. if you run it behind an
authenticating reverse proxy), you need to perform a manual maintenance step. As of this version,
all users that are created via external pre-authentication are added to the realm <code>preauth</code>. Any
existing users that were created via pre-authentication need to be moved to this realm manually,
otherwise they will not be able to log in anymore.</p>
</div>
<div class="paragraph">
<p>This migration can be performed by invoking INCEpTION from the command line as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">java -jar inception-app-webapp-35.5-standalone.jar users migrate-preauthenticated-users --dry-run</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command only works if INCEpTION is configured for external pre-authentication. If you keep
the <code>settings.properties</code> file in a non-standard location, you need to specify the the respective
path using <code>-Dinception.home=/PATH/TO/FOLDER_CONTAINING_SETTINGS_PROPERTIES</code> <strong>before</strong> the <code>-jar</code> in the
command.</p>
</div>
<div class="paragraph">
<p>The command will migrate all users that have no password (i.e. the <code>password</code> in the database is
<code>null</code> or an empty encrypted password was stored) and which do also not have <code>ROLE_REMOTE</code>. A user
with no password cannot log in via the login form. The remote API does not support external
pre-authentication and always uses the database for authentication. So if the user either has a
password or <code>ROLE_REMOTE</code>, it will not be migrated.</p>
</div>
<div class="paragraph">
<p>The command as shown above will operate in <strong>dry-run</strong> mode and will only print the results of the
migration without actually performing it. You should look at the results to see if you are ok with
them. Then, remove the <code>--dry-run</code> argument and run the command again to actually perform the
migration.</p>
</div>
<div class="paragraph">
<p>The alternative to using this command is to directly update the respective user records in the
<code>users</code> table in the database by setting the <code>realm</code> of all externally pre-authenticated users to
<code>preauth</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuration_property_names_changed"><a class="anchor" href="#_configuration_property_names_changed"></a>Configuration property names changed</h4>
<div class="paragraph">
<p>The following configuration property names from the <code>settings.properties</code> file have changed. When you
start INCEpTION, warnings will be logged if the old names are used until you rename the
respective properties in your <code>settings.properties</code> file. In a future version, the old names will
not be supported anymore and the warnings will be removed.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Old name</th>
<th class="tableblock halign-left valign-top">New name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>login.message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.login.message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom message to appear on the login page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>login.max-concurrent-sessions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.login.max-concurrent-sessions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of concurrently logged-in users.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_inception_24_0"><a class="anchor" href="#_inception_24_0"></a>INCEpTION 24.0</h3>
<div class="sect3">
<h4 id="_pdf_editor"><a class="anchor" href="#_pdf_editor"></a>PDF editor</h4>
<div class="paragraph">
<p>This version includes a new PDF editor and a new PDF format. The old PDF editor and PDF format
still exist, but have been renamed to <strong>PDF (legacy)</strong>. When starting new projects, these old formats
should no longer be used as they have known and unfixable bugs. The new PDF format that is simply
called <strong>PDF</strong> is much more robust.</p>
</div>
</div>
<div class="sect3">
<h4 id="_compression"><a class="anchor" href="#_compression"></a>Compression</h4>
<div class="paragraph">
<p>This version has the ability to compress CAS files on disk. This feature is turned on by default.
If you experience problems and have the feeling that they might be caused by the compression feature,
you can turn it off by adding <code>cas-storage.compressed-cas-serialization=false</code> to the <code>settings.properties</code>.
The compression typically reduces the size of the CAS file down to around 60% of its actual size.</p>
</div>
<div class="paragraph">
<p>The compression algorithm being used is <a href="https://github.com/xerial/snappy-java">Snappy</a>.
On many platforms, a native implementation is used automatically. If no native implementation is
available, a pure-java implementation is used. Due to the reduced size, saving a CAS will take
consume less I/O bandwidth which typically the overall time required to persist a CAS to storage
despite the additional overhead of compression.</p>
</div>
<div class="paragraph">
<p>The compression setting takes effect whenever a CAS is written to disk. Changing it does not
immediately (de)compress existing CAS files. Instead, they will be slowly converted to being
(de)compressed over time as they are updated by the system as part of normal operations.</p>
</div>
<div class="paragraph">
<p>Decompressing CAS files is supported starting with INCEpTION 23.9. If you have compressed
CAS files, you cannot downgrade to an older version than 23.9. Also, you cannot import projects
containing compressed CAS files into versions older than 23.9.</p>
</div>
</div>
<div class="sect3">
<h4 id="_full_text_indices"><a class="anchor" href="#_full_text_indices"></a>Full-text indices</h4>
<div class="paragraph">
<p>This version includes a new version of Apache Lucene which is used for maintaining the full text
indices used for searching in knowledge bases and also used by the annotation search sidebar.</p>
</div>
<div class="paragraph">
<p>The indices of the knowledge bases should continue to work normally after the upgrade. If you
encounter problems, you can manually trigger an index rebuild by selecting the knowledge base
in the project settings and using the <strong>Rebuild index</strong> button. Note that rebuilding full text
indices only works for local knowledge bases.</p>
</div>
<div class="paragraph">
<p>The indices used by the annotation search sidebar will not function until they are rebuilt. The
system will automatically trigger the rebuild process when the annotation page is used. However,
in particular for large projects, rebuilding the indices can take very long.</p>
</div>
<div class="paragraph">
<p>For installations with many or large projects, it is recommended to perform an <strong>offline index rebuild</strong>.
First ensure that INCEpTION is not running. Then run INCEpTION from the command line as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ java -jar inception-app-webapp-24.0-standalone.jar search reindex</pre>
</div>
</div>
<div class="paragraph">
<p>This command will rebuild the annotation search indices of <strong>all projects</strong> which depending on the
number of projects and their size can add up to <strong>several hours</strong> (although for most people, it
should be pretty fast). When the process is complete, you can restart INCEpTION as usual. Do not try
to start INCEpTION while the process is still running.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_inception_22_0"><a class="anchor" href="#_inception_22_0"></a>INCEpTION 22.0</h3>
<div class="paragraph">
<p>This version brings a new project export page which uses WebSocket. If INCEpTION is deployed behind a reverse proxy, this technical changes requires updating the reverse proxy configuration. The admin guide includes an updated section on deploying behind nginx and Apache HTTPD reverse proxies. Additionally, the CSRF settings in the INCEpTION <code>settings.properties</code> file need to be updated. The required settings are also described in the admin guide in the section for deploying behind a reverse proxy.</p>
</div>
<div class="paragraph">
<p>If you have trouble reconfiguring your reverse proxy for WebSocket, it is still possible to switch back to the old export page by adding the following line to the <code>settings.properties</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>dashboard.legacy-export=true</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The setting to switch back to the old export page will be removed in later versions. Also, INCEpTION will make more use of the WebSocket protocol in the future. If you have trouble updating your reverse proxy configuration to support WebSocket, please let us know.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_inception_21_0_1"><a class="anchor" href="#_inception_21_0_1"></a>INCEpTION 21.0.1</h3>
<div class="paragraph">
<p>If you are using MySQL or MariaDB, please ensure that default row format is set to <code>dynamic</code>, otherwise, you may get an error like this during upgrade:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Error creating bean with name 'liquibase' defined in class path resource
[org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]:
Invocation of init method failed; nested exception is liquibase.exception.LiquibaseException:
liquibase.exception.MigrationFailedException:
Migration failed for change set de/tudarmstadt/ukp/inception/preferences/model/db-changelog.xml::20210925-1::INCEpTION Team:
Reason: liquibase.exception.DatabaseException: (conn=242839) Index column size too large. The maximum column size is 767 bytes.
[Failed SQL: (1709) ALTER TABLE `inception-testing`.default_project_preference ADD CONSTRAINT UK_default_project_preference_name_project UNIQUE (project, name)]</pre>
</div>
</div>
<div class="paragraph">
<p>To set the default row format, you can add these settings to your MySQL/MariaDB config file and then restart the database:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>innodb_strict_mode=1
innodb_default_row_format='dynamic'</pre>
</div>
</div>
<div class="paragraph">
<p>If you upgrade from a version older than 20.0, please check the update notes for INCEpTION 20.0.</p>
</div>
</div>
<div class="sect2">
<h3 id="_inception_20_0"><a class="anchor" href="#_inception_20_0"></a>INCEpTION 20.0</h3>
<div class="ulist">
<ul>
<li>
<p>🎉 <strong>New versioning.</strong> INCEpTION has come a long way and the time has come to reflect that in the version. So as of this release, we are dropping the the zero from the version!</p>
</li>
<li>
<p>⚠️ <strong>Database driver changed.</strong> The MySQL driver is no longer bundled, only the MariaDB driver is shipped. If you have manually configured a DB driver and dialect in the <code>settings.properties</code>, comment them out. In the JDBC connection string replace <code>mysql</code> with <code>mariadb</code>. The MariaDB driver should also work with a MySQL database. If you use Docker Compose, make sure to remove the <code>INCEPTION_DB_DIALECT</code> and <code>INCEPTION_DB_DRIVER</code> and update the <code>INCEPTION_DB_URL</code> to start with <code>jdbc:mariadb:</code> instead of <code>jdbc:mysql:</code>. For additional details, please check the section on MariaDB configuration in the admin guide.</p>
</li>
<li>
<p>⚠️ <strong>Increased disk usage.</strong> Internal backup for CAS (annotation) files enabled to keep 2 backups with min 24h in between - this change increases disk usage! If you operate with low disk space, consider disabling the internal backup.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_inception_0_16_0"><a class="anchor" href="#_inception_0_16_0"></a>INCEpTION 0.16.0</h3>
<div class="paragraph">
<p>For deployments using AJP and Apache Webserver 2.5 or higher: to use the advanced AJP secret, see the updated section on running INCEpTION behind a reverse proxy in the admin guide..
For deployments using AJP and Apache Webserver 2.4 or lower: you need to disable the AJP secret by setting <code>server.ajp.port</code> (replaces <code>tomcat.ajp.port</code>) and <code>server.ajp.address</code> properties as described in the admin guide and also set <code>server.ajp.secret-required=false</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_inception_0_15_2"><a class="anchor" href="#_inception_0_15_2"></a>INCEpTION 0.15.2</h3>
<div class="paragraph">
<p>For deployments via WAR-file on Apache Tomcat, Apache Tomcat 9.0. is now necessary. Note that we do not recommend a WAR deployment and do not distribute a pre-built WAR file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_inception_0_12_0"><a class="anchor" href="#_inception_0_12_0"></a>INCEpTION 0.12.0</h3>
<div class="paragraph">
<p>If you are running INCEpTION behind a reverse proxy and have so far had a line like <code>server.contextPath=/XXX</code> in your <code>settings.properties</code> file, please replace it with <code>server.servlet.context-path=/XXX</code>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<h1 id="sect_remote_api" class="sect0"><a class="anchor" href="#sect_remote_api"></a>Remote API</h1>
<div class="openblock partintro">
<div class="content">
<div class="exampleblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To use this functionality, you need to enable it first by adding <code>remote-api.enabled=true</code> to the <code>settings.properties</code> file (see the <a href="#sect_settings">Admin Guide</a>).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>In order to programmatically manage annotation project, a REST-like remote API is offered. This API
is disabled by default. In order to enable it, add the setting <code>remote-api.enabled=true</code> to the
<code>settings.properties</code> file.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Remote API settings</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remote-api.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable remote API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remote-api.http-basic.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable HTTP basic authentication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remote-api.oauth2.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable HTTP basic authentication</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remote-api.oauth2.realm</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client ID used by the OAuth2 IdP (mandatory if OAuth2 is enabled)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>inception-client</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remote-api.oauth2.user-name-attribute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Claim containing the username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sub</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>preferred_username</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Once the remote API is enabled, it becomes possible to assign the role <code>ROLE_REMOTE</code> to a user. Create a new user, e.g. <code>remote-api</code> via the user management page and assign at least the roles <code>ROLE_USER</code> and <code>ROLE_REMOTE</code>. Most of the actions accessible through the remote API require administrator access, so adding the <code>ROLE_ADMIN</code> is usually necessary as well.</p>
</div>
<div class="paragraph">
<p>Once the remote API has been enabled, it offers a convenient and self-explanatory web-based user interface under <code>&lt;APPLICATION_URL&gt;/swagger-ui.html</code> which can be accessed by any user with the role <code>ROLE_REMOTE</code>. Here, you can browse the different operations, their parameters, and even try them out directly via a web browser. The actual AERO remote API uses <code>&lt;APPLICATION_URL/api/aero/v1</code> as the
base URL for its operations.</p>
</div>
<div class="paragraph">
<p>The API follows the <a href="https://openminted.github.io/releases/aero-spec/1.0.0/omtd-aero/">Annotation Editor Remote Operations (AERO) protocol</a>.</p>
</div>
<div class="paragraph">
<p>The third-party Python library <a href="https://pycaprio.readthedocs.io/en/latest/">pycaprio</a> can be used
to facilitate accessing the remote API.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_oauth2_authentication"><a class="anchor" href="#_oauth2_authentication"></a>OAuth2 authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The remote API can be used using OAuth2 authentication. A client is expected to obtain a JWT token
from an OAuth2 endpoint. INCEpTION will verify that token using the public key of the OAuth2
endpoint and if the token is valid, access is granted. It is required that the user associated with
then token has been created before in INCEpTION. Contrary to OAuth2 logins to the web interface,
logins to the remote API do <strong>not</strong> automatically create users.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s consider you are using Keycloak as the OAuth2 provider. First, you would set up a realm in
Keycloak as described in <a href="#sect_security_authentication_oauth2">OAuth2 authentication</a>. Assuming you followed the example,
you would now open the <code>inception-client</code> client in the <strong>clients</strong> panel of the <strong>inception-demo</strong>
realm. There, you have to enable the <strong>Service Accounts</strong> toggle and save.</p>
</div>
<div class="paragraph">
<p>In the <code>settings.properties</code> file, you need to add the following settings to enable OAuth2 login to
the remote API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>remote-api.oauth2.enabled=true
remote-api.oauth2.realm=inception-demo
remote-api.oauth2.user-name-attribute=preferred_username
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8180/realms/inception-demo</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that you must also have configured OAuth2 authentication for logins to the web interface,
otherwise the next step of creating a user will not be possible.</p>
</div>
<div class="paragraph">
<p>Enabling the <strong>Service Accounts</strong> option in Keycloak will allow obtaining a JWT token using a
client ID and client credentials. You can find these credentials in the <strong>Credentials</strong> tab of the
<code>inception-client</code> client in Keycloak. The preferred username of this service user is automatically
set to <code>inception-client-service-user</code> by Keycloak.</p>
</div>
<div class="paragraph">
<p>Finally, to allow the <code>inception-client-service-user</code> to use the remote API, you need to create that
user in INCEpTION. Go to the user management section in INCEpTION and create a user named
<code>inception-client-service-user</code>. Assign at least the roles <code>ROLE_REMOTE</code> and <code>ROLE_USER</code> to the new user
and set the realm to <code>external:inception-client</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<a href="https://pycaprio.readthedocs.io/en/latest/">Pycaprio</a> does currently not support OAuth2
      authentication - only HTTP basic authentication.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_remote_api_webhooks"><a class="anchor" href="#sect_remote_api_webhooks"></a>Webhooks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Webhooks allow INCEpTION to notify external services about certain events. For example, an
external service can be triggered when an annotator marks a document as finished or when all
documents in a project have been completely curated.</p>
</div>
<div class="paragraph">
<p>Webhooks are declared in the <code>settings.properties</code> file. For every webhook, it is necessary to
specify an URL (<code>url</code>) and a set of topics (<code>topics</code>) about with the remote service listening at the
given URL is notified. If the remote service is accessible via https and the certificate is not
known to the JVM running INCEpTION, the certificate verification can be disabled
(<code>verify-certificates</code>).</p>
</div>
<div class="paragraph">
<p>The following topics are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DOCUMENT_STATE</code> - events related to the change of a document state such as when any user starts
annotating or curating the document.</p>
</li>
<li>
<p><code>ANNOTATION_STATE</code> - events related to the change of an annotation state such as when a user
starts or completes the annotation of a document.</p>
</li>
<li>
<p><code>PROJECT_STATE</code> - events related to the change of an entire project such as when all documents
have been curated.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example webhook configuration</div>
<div class="content">
<pre>webhooks.globalHooks[0].url=http://localhost:3333/
webhooks.globalHooks[0].topics[0]=DOCUMENT_STATE
webhooks.globalHooks[0].topics[1]=ANNOTATION_STATE
webhooks.globalHooks[0].topics[2]=PROJECT_STATE
webhooks.globalHooks[0].verify-certificates=false</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can test receiving WebHooks e.g. using <a href="https://pypi.org/project/pyserv/">pyserv</a> or <a href="https://en.wikipedia.org/wiki/Netcat">netcat</a>.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_authentication_headers"><a class="anchor" href="#_authentication_headers"></a>Authentication headers</h3>
<div class="paragraph">
<p>If the recipient of the webhook requires an authentication header, you can configure the header and
its value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>webhooks.globalHooks[0].auth-header=Bearer
webhooks.globalHooks[0].auth-header-value=MY-SECRET-TOKEN</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_retries"><a class="anchor" href="#_retries"></a>Retries</h3>
<div class="paragraph">
<p>In some cases, the recipient of a webhook notification may be temporarily unavailable. It is possible to retry the delivery of a notification several times before giving up. By default,
only one delivery attempt is made (<code>webhooks.retry-count=0</code>). However, you can configure up to three additional attempts with a delay of up to 5000ms between them.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>webhooks.retry-count=3
webhooks.retry-delay=5000</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Events being triggered while INCEpTION is being shut down may not trigger any webhook deliveries.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_bulk_changes"><a class="anchor" href="#_bulk_changes"></a>Bulk changes</h3>
<div class="paragraph">
<p>When performing bulk changes of annotation states (i.e. via the workload management page), no
individual <code>ANNOTATION_STATE</code> events are  generated. The document and project states are re-calculated
after the bulk change and depending on whether the bulk action had any effect on them,
<code>DOCUMENT_STATE</code> and/or <code>PROJECT_STATE</code> events are generated.</p>
</div>
</div>
<div class="sect2">
<h3 id="_message_examples"><a class="anchor" href="#_message_examples"></a>Message examples</h3>
<div class="paragraph">
<p>When a webhook is triggered, it sends a HTTP <code>POST</code> request to the configured URL. The <code>X-AERO-Notification</code> header indicates the topic and the body of the request is a JSON structure providing
details about the state change. The JSON in the examples below have been pretty-printed for your
convenient - the actual messages are not pretty-printed.</p>
</div>
<div class="listingblock">
<div class="title">Example <code>PROJECT_STATE</code></div>
<div class="content">
<pre>{
  "timestamp": 1234567890,
  "projectId": 123,
  "projectName": "Example project",
  "projectPreviousState": "CURATION-IN-PROGRESS",
  "projectState": "ANNOTATION-IN-PROGRESS"
}</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example <code>DOCUMENT_STATE</code></div>
<div class="content">
<pre>{
  "timestamp": 1234567890,
  "projectId": 123,
  "projectName": "Example project",
  "documentId": 565,
  "documentName": "document.txt",
  "documentPreviousState": "CURATION-IN-PROGRESS",
  "documentState": "ANNOTATION-IN-PROGRESS"
}</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example <code>ANNOTATION_STATE</code></div>
<div class="content">
<pre>{
  "timestamp": 1234567890,
  "projectId": 123,
  "projectName": "Example project",
  "documentId": 565,
  "documentName": "document.txt",
  "user": "annotator1",
  "annotationUser": "annotator1",
  "annotationPreviousState": "COMPLETE",
  "annotationState": "COMPLETE",
  "annotatorAnnotationState": "IN_PROGRESS",
  "annotatorComment":"Test comment"
}</pre>
</div>
</div>
<div class="paragraph">
<p>In the <code>ANNOTATION_STATE</code> message, we have two fields containing a user name: <code>user</code> and <code>annotationUser</code>.
Usually, these two fields will be the same. They differ if a user changes the state of a document
of another user. An example is when a curator marks the curation of a document as finished. In this
case, the curator&#8217;s username is in the field <code>user</code> while the <code>annotationUser</code> field has the value
<code>CURATION_USER</code>.</p>
</div>
<div class="paragraph">
<p>The effective annotation state can be found in the <code>annotationState</code> field. However, it can be the
case that a manager has overridden the state, e.g. because an annotator forgot to mark a document
as finished. The <code>annotatorAnnotationState</code> field contains the state that was  (implicitly) set by the
annotator.</p>
</div>
<div class="paragraph">
<p>The <code>annotatorComment</code> field contains the comment that annotators can set when closing a document
and is typically used to report a problem with the document. Thus, it can typically be found only
when the <code>annotatorState</code> is <code>COMPLETE</code> (document closed as successful) or <code>LOCKED</code> (document closed
as not successful).</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<h1 id="sect_settings" class="sect0"><a class="anchor" href="#sect_settings"></a>Settings</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Application settings are managed via a file called <code>settings.properties</code> which must reside in the
application home folder. This file is optional and might need to be created first in the <a href="#sect_home_folder">Application home folder</a>. If the file does not exist, default values are assumed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_general_settings"><a class="anchor" href="#_general_settings"></a>General Settings</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. General settings</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>warnings.unsupportedBrowser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warn about unsupported browser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.login.message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom message to appear on the login page, such as project web-site, annotation guideline link, &#8230;&#8203; The message supports markdown syntax.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unset</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;span style="color:red; font-size: 200%;"&gt;Use are your own risk.&lt;/span&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>user.profile.accessible</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether regular users can access their own profile to change their password and other profile information. This setting has no effect when running in pre-authentication mode.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>user-selection.hideUsers</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether the list of users show in the users tab of the project settings is restricted. If this setting is enable, the full name of a user has to be entered into the input field before the user can be added. If this setting is disabled, it is possible to see all enabled users and to add any of them to the project.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>commands.open-browser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Execute this command instead of the operating-systems&#8217;s default command to open the browser window when running in standalone mode. <code>%u</code> is replaced with the INCEpTION URL.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unset</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/usr/bin/open %u -a "/Applications/Google Chrome.app"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>plugins.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to enable the ability to install plugins into INCEpTION (experimental).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui.error-page.hide-details</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable display of information about operating system, Java version, etc. on the error page. While this information is useful for local users when reporting bugs, security-conscious administrators running INCEpTION as a service may want to enable hiding the details to avoid information about their system being exposed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sect_security_authentication_policy"><a class="anchor" href="#sect_security_authentication_policy"></a>Security policies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You have several options of configuring which types of usernames and passwords are accepted.
Note that these values are only enforced when creating new users or updating passwords. They
will not invalidate existing usernames or passwords. Length restrictions and patterns are checked
independently. If either fails, the username or password is rejected.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When external pre-authentication is used, these settings are ignored.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In addition to the restrictions imposed here, INCEpTION may impose additional restrictions.
      E.g. certain usernames are not allowed and certain characters are also not allowed to appear in usernames.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.minimum-password-length</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum number of characters a password can have</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(max 128)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.maximum-password-length</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of characters a password can have</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(max 128)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.minimum-username-length</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum number of characters a username can have</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(max 128)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.maximum-username-length</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of characters a username can have</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(max 128)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.username-pattern</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regular expression for valid usernames</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>.*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[a-zA-Z0-9]+</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.password-pattern</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regular expression for valid passwords</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>.*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*\p{Punct}).*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>security.space-allowed-in-username</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether simple space characters are permitted in usernames. Enable this option only when necessary to restore access to existing accounts in certain scenarios such as when using external authentication. Usernames with spaces may lead to problems e.g. when exporting/importing projects or documents or when constructing certain URLs.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_database_connection"><a class="anchor" href="#_database_connection"></a>Database connection</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Database settings in the <code>settings.properties</code> file</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">database.url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC connection string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>HSQLDB location in application home</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc:mariadb://localhost:3306/inception?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTC</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">database.username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sa</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">database.password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unset</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pass</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">database.dialect</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database dialect</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unset (auto detected)</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.hibernate.dialect.MariaDB53Dialect</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">database.driver</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database driver</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unset (auto detected)</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.mariadb.jdbc.Driver</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">database.initial-pool-size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initial database connection pool size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">database.min-pool-size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum database connection pool size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">database.max-pool-size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum database connection pool size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">warnings.embeddedDatabase</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Warn about using an embedded database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The basic database connection details can also be configured via environment variables. When these
environment variables are present, they are preferred over the <code>settings.properties</code> file.
The following environment variables can be used:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Database configuration via environment variables</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INCEPTION_DB_URL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JDBC connection string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>HSQLDB location in application home</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc:mariadb://localhost:3306/inception?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=UTC</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INCEPTION_DB_USERNAME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sa</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INCEPTION_DB_PASSWORD</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unset</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pass</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INCEPTION_DB_DIALECT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database dialect</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unset (auto detected)</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.hibernate.dialect.MariaDB53Dialect</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INCEPTION_DB_DRIVER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database driver</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unset (auto detected)</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.mariadb.jdbc.Driver</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_server_settings"><a class="anchor" href="#_server_settings"></a>Server Settings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>These settings relate to the embedded web server in the JAR version of INCEpTION.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Server settings</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>server.port</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port on which the server listens</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>8080</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>18080</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>server.address</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP address on which the server listens</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.0.0.0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>127.0.0.1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>server.ajp.port</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port for AJP connector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-1</code> <em>(disabled)</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>8009</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>server.ajp.address</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP address on which the AJP connector listens</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>127.0.0.1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.0.0.0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>server.ajp.secret-required</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether AJP connections require a shared secret</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>server.ajp.secret</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Shared secret for AJP connections</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unset</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>some secret string of your choice</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>server.startup-notice.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether a self-refreshing startup screen is served while the application is booting before the login screen becomes available</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The application is based on Spring Boot and using an embedded Tomcat server. You can configure
      additional aspects of the embedded web server using default <a href="https://docs.spring.io/spring-boot/docs/2.7.x/reference/html/application-properties.html">Spring Boot configuration settings</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_internal_annotation_backup"><a class="anchor" href="#_internal_annotation_backup"></a>Internal annotation backup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>INCEpTION stores its annotations internally in files. Whenever a user
performs an action on a document, the file is updated. It is possible to configure INCEpTION
to keep internal backups of these files, e.g. to safeguard against certain types of crashes or bugs.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This internal backup is not a replacement for a proper backup. It affects only the annotation
files - not the project data, knowledge bases, or other kinds of data. Also, the annotation data is
not directly re-usable by INCEpTION without additional information that is contained in the
database!
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example internal backup</div>
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text"># Delete annotation backups older than 30 days (60 * 60 * 24 * 30 = 30 days)
backup.keep.time=2592000

# At least 5 minutes must pass between two annotation backups (60 * 5 = 5 minutes)
backup.interval=300

# Keep at most 10 backups for each annotation backup
backup.keep.number=10</code></pre>
</div>
</div>
<div class="paragraph">
<p>The internal backups are controlled through three properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Database settings in the <code>settings.properties</code> file</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backup.interval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time between backups (seconds)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>172800</code> <em>(60 * 60 * 24 = 24 hours)</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code> <em>(disabled)</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backup.keep.number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of backups to keep</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code> <em>(unlimited)</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>backup.keep.time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum age of backups to keep (seconds)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code> <em>(unlimited)</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2592000</code> <em>(60 * 60 * 24 * 30 = 30 days)</em></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The interval controls the minimum time between changes to a document that needs to have elapsed in
order for a new backup to be created. Setting the interval to <code>0</code> disables the internal backups.</p>
</div>
<div class="paragraph">
<p>When backups are enabled, either or both of the properties <strong>backup.keep.number</strong> and
<strong>backup.keep.time</strong> should be changed as well, because their default values will cause the
backups to be stored indefinitely and they will eventually fill up the disk.</p>
</div>
<div class="paragraph">
<p>The properties <strong>backup.keep.number</strong> and <strong>backup.keep.time</strong> control how long backups are keep
and the maximal number of backups to keep. These settings are effective simultaneously.</p>
</div>
<div class="listingblock">
<div class="title">Example: Make backups every 5 minutes and keep 10 backups irrespective of age</div>
<div class="content">
<pre>backup.interval    = 300
backup.keep.number = 10
backup.keep.time   = 0</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example: Make backups every 5 minutes and all not older than 7 days (60 * 60 * 24 * 7 seconds)</div>
<div class="content">
<pre>backup.interval    = 300
backup.keep.number = 0
backup.keep.time   = 604800</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example: Make backups every 5 minutes and keep at most 10 backups that are not older than 7 days</div>
<div class="content">
<pre>backup.interval    = 300
backup.keep.number = 10
backup.keep.time   = 604800</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_settings_cas_storage"><a class="anchor" href="#sect_settings_cas_storage"></a>CAS storage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes settings related to the storage of CAS data objects (i.e. annotations).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. CAS cache settings in the <code>settings.properties</code> file</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cas-storage.compressed-cas-serialization</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to compress annotation files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cas-storage.file-system-timestamp-accuracy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">For file systems where timestamps are not exact, this can be used to configure some leniency. This setting should be used with extreme caution. If an editor accesses an annotation file that is out-of-sync with the editor, this can lead to unexpected behavior. However, when deploying INCEpTION e.g. on certain cloud storage facilitites, the file system timestamps may not be exact down to the millisecond,
this it may be helpful to configure a slight leniency here.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>500ms</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The compression setting takes effect whenever a CAS is written to disk. Changing it does not
immediately (de)compress existing CAS files. Instead, they will be slowly converted to being
(de)compressed over time as they are updated by the system as part of normal operations.</p>
</div>
<div class="sect2">
<h3 id="_cas_cache"><a class="anchor" href="#_cas_cache"></a>CAS cache</h3>
<div class="paragraph">
<p>To speed up interactions, INCEpTION keeps a cache annotation data in memory.
This cache can be tuned using the following properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. CAS cache settings in the <code>settings.properties</code> file</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cas-storage.cache.shared-cas-cache-size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of shared read-only CASes to keep in memory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code>-<code>5000</code> <em>(depending on heap size)</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cas-storage.cache.idle-cas-eviction-delay</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Periodic interval in which the system should check if CASes can be removed from the memory cache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5m</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>30s</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cas-storage.cache.min-idle-cas-time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time a CAS should at least remain cached in memory to avoid loading from disk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5m</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>30s</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cas-storage.cache.cas-borrow-wait-timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time for an exclusive action to wait for another exclusive action to finish</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3m</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5m</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_document_im_export"><a class="anchor" href="#_document_im_export"></a>Document Im-/Export</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Control the importing and exporting of documents.</p>
</div>
<div class="paragraph">
<p>The <code>run-cas-doctor-on-import</code> is by default set to <code>AUTO</code> which enables running the CAS Doctor on
certain file formats which give the user a lot of flexibility but also have great protential for
importing inconsistent data. It can be set to <code>OFF</code> to disable all checks on import or to <code>ON</code> to
check all formats, even the more rigid ones which give little opportunity for inconsistent data.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. Document import/export settings in the <code>settings.properties</code> file</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>document-import.max-tokens</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Token-count limit for imported documents</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>2000000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code> <em>(no limit)</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>document-import.max-sentences</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sentence-count limit for imported documents</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20000</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code> <em>(no limit)</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>document-import.run-cas-doctor-on-import</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to run the CAS Doctor on every imported document</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AUTO</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OFF</code> (faster), <code>ON</code> (check all formats)</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_custom_header_icons"><a class="anchor" href="#_custom_header_icons"></a>Custom header icons</h2>
<div class="sectionbody">
<div class="paragraph">
<p>INCEpTION allows adding custom icons to the page header. You can declare such custom icons in the  <code>settings.properties</code> file as shown in the example below. Each declaration begins with the prefix <code>style.header.icon.</code> followed by an identifier (here <code>myOrganization</code> and <code>mySupport</code>). The suffixes <code>.linkUrl</code> and <code>.imageUrl</code> indicate the URL of the target page and of the icon image respectively. Images are automatically resized via CSS. However, to keep loading times low, you should point to a reasonably small image.</p>
</div>
<div class="paragraph">
<p>The order of the icons is controlled by the ID, not by the order in the configuration file!</p>
</div>
<div class="listingblock">
<div class="title">Example: Custom header icon</div>
<div class="content">
<pre>style.header.icon.myOrganization.linkUrl=http://my.org
style.header.icon.myOrganization.imageUrl=http://my.org/logo.png
style.header.icon.mySupport.linkUrl=http://my.org/support
style.header.icon.mySupport.imageUrl=http://my.org/help.png</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">style.header.icon&#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Icons/links to display in the page header. For details, see below.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unset</em></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_project_dashboard"><a class="anchor" href="#_project_dashboard"></a>Project dashboard</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Project dashboard settings in the <code>settings.properties</code> file</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui.dashboard.accessible-by-roles</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System roles able to access project dashboards</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ANNOTATOR</code>, <code>CURATOR</code>, <code>MANAGER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MANAGER</code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To specify multiple values of the <code>ui.dashboard.accessible-by-roles</code> in a <code>settings.properties</code>
      file, multiple lines need to be added like <code>ui.dashboard.accessible-by-roles[0]=ANNOTATOR</code>,
      <code>ui.dashboard.accessible-by-roles[1]=CURATOR</code>, etc.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Project managers can always access the project dashboard, even if they are not included in the
      <code>ui.dashboard.accessible-by-roles</code> setting.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_theming"><a class="anchor" href="#_theming"></a>Theming</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are two options of theming INCEpTION.</p>
</div>
<div class="paragraph">
<p>The recommended approach is placing a file named <code>theme.css</code> into the application home folder. If
this file is present, it is automatically loaded on all pages of the application. You can place
custom styles into the file and make them override the default styles.</p>
</div>
<div class="paragraph">
<p>There is also the option to place a file called <code>bootstrap.css</code> into the application folder. If that
file is present, the built-in customized Bootstrap styles of INCEpTION are not loaded and this
file is loaded instead. For the application to work, the custom <code>bootstrap.css</code> must be fully
compatible with the built-in styles. To create such a file, obtain the <code>scss</code> files from the
<a href="https://github.com/inception-project/inception/tree/main/inception/inception-bootstrap/src/main/ts/bootstrap">inception-bootstrap</a> module for the INCEpTION version that you are using, adjust
them, and use SCSS to compile them from the root <code>bootstrap.scss</code> file into a customized
<code>bootstrap.css</code> file.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
New versions of INCEpTION may come with changes to the CSS styles being used without
      any special announcement. If you use theming, be sure to thoroughly review if your custom styles still
      work with new versions. Best keep any changes minimal.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 17. Theming settings</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui.dark-mode.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to enable the ability switch between light and dark mode (experimental).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sect_settings_annotation"><a class="anchor" href="#sect_settings_annotation"></a>Annotation editor</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 18. Settings related to the brat editor</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotation.default-preferences.auto-scroll</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to scroll the annotation being edited into the center of the page</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotation.default-preferences.page-size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of sentences to display per page</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ui.brat.single-click-selection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to select annotations with a single click</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 19. Settings related to string features</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotation.feature-support.string.combo-box-threshold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the tagset is larger than the threshold, an combo-box field is used instead of a radio-choice.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotation.feature-support.string.auto-complete-threshold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the tagset is larger than the threshold, an auto-complete field is used instead of a standard combobox.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">75</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotation.feature-support.string.auto-complete-max-results</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When an auto-complete field is used, this determines the maximum number of items shown in the dropdown menu.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 20. Settings related to link features</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotation.feature-support.link.auto-complete-threshold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the tagset is larger than the threshold, an auto-complete field is used instead of a standard combobox.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">75</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotation.feature-support.link.auto-complete-max-results</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When an auto-complete field is used, this determines the maximum number of items shown in the dropdown menu.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="sect_settings_annotation-editor_pdf"><a class="anchor" href="#sect_settings_annotation-editor_pdf"></a>PDF Editor Settings</h3>
<div class="paragraph">
<p>This section describes the global settings related to the PDF annotation editor module.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 21. Knowledge base settings overview</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui.pdf.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable/disable KB support</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="sect_settings_annotation-editor_pdf_legacy"><a class="anchor" href="#sect_settings_annotation-editor_pdf_legacy"></a>PDF Editor Settings (legacy)</h3>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Legacy feature. To use this functionality, you need to enable it first by adding <code>ui.pdf-legacy.enabled=true</code> to the <code>settings.properties</code> file.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Support for this feature will be removed in a future version. The replacement is <a href="#sect_settings_annotation-editor_pdf">PDF Editor Settings</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>This section describes the global settings related to the legacy PDF annotation editor module.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 22. Knowledge base settings overview</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui.pdf-legacy.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable/disable KB support</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="sect_settings_cross-layer-relations"><a class="anchor" href="#sect_settings_cross-layer-relations"></a>Cross-layer relations</h3>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Experimental feature. While this feature introduces a new level of flexibility, it can also interact with existing features in unexpected and untested ways.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>This section describes the global settings related to the support for cross-layer relations.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 23. Segmentation settings overview</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui.cross-layer-relations-enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable/disable cross-layer relations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="sect_settings_segmentation"><a class="anchor" href="#sect_settings_segmentation"></a>Editable Segmentation Settings</h3>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Experimental feature. Highly experimental. Expect strange things to happen if you start
adding/removing/changing segmentation annotations (i.e. sentences or tokens).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>This section describes the global settings related to the support for editable segmentation annotations (i.e. sentences or tokens).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 24. Segmentation settings overview</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ui.sentence-layer-editable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable/disable editing sentences</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_settings_documentmetadata"><a class="anchor" href="#sect_settings_documentmetadata"></a>Document Metadata Settings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the global settings related to the document metadata annotation support.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Disabling document metadata support prevents new document metadata layers from being
       created, but it does not prevent the use of existing document metadata layers layers in order
       not to break existing projects.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 25. Knowledge base settings overview</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">documentmetadata.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable/disable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sect_settings_concept-linking"><a class="anchor" href="#sect_settings_concept-linking"></a>Concept Linking</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are several configurable parameters related to the Concept Linking functionality:</p>
</div>
<div class="paragraph">
<div class="title">Cache size</div>
<p>This parameter controls the size of the Candidate Cache, which stores a set of candidates for a mention.
Increasing the cache size will reduce the number of queries that have to be made against the KB
and therefore increase average retrieval time.</p>
</div>
<div class="paragraph">
<div class="title">Candidate Frequency Threshold</div>
<p>This parameter controls after how many concepts the ranking approach should take into account by
selecting the <code>n</code> most frequent concepts. Increasing this parameter will lead to a longer ranking time,
since more candidates are considered for ranking.</p>
</div>
<div class="paragraph">
<div class="title">Mention Context Size</div>
<p>This parameter declares the size <code>k</code> of the context, where the context is defined as the words
included in a window with <code>k</code> words to both left and right.</p>
</div>
<div class="paragraph">
<div class="title">Candidate Retrieval Limit</div>
<p>This parameter defines how many concepts should be retrieved for the Candidate Retrieval step.
Increasing this parameter will lead to a longer time to retrieve candidates from the KB.</p>
</div>
<div class="paragraph">
<div class="title">Semantic Signature Query Limit</div>
<p>This parameter defines how many concepts should be retrieved for the Semantic Signature of a candidate.
Increasing this parameter will lead to a longer time to retrieve concepts for constructing the Semantic Signature.</p>
</div>
<div class="paragraph">
<div class="title">Candidate Display Limit</div>
<p>This parameter regulates how many candidates will be displayed for a mention in the Concept Selector UI.</p>
</div>
<div class="paragraph">
<p>If no value for a parameter is specified, its default value is used. The default values are shown as
examples of how the parameters can be configured below:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 26. Concept linking settings overview</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inception.entity-linking.cacheSize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1024</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inception.entity-linking.candidateQueryLimit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Candidate Retrieval Limit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inception.entity-linking.mentionContextSize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mention Context Size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inception.entity-linking.candidateDisplayLimit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Candidate Display Limit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inception.entity-linking.signatureQueryLimit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Semantic Signature Query Limit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2147483647</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_resources"><a class="anchor" href="#_resources"></a>Resources</h3>
<div class="paragraph">
<p>In order to improve the quality of suggestions, several additional resources can be incorporated.
These are to be put into the <code>.inception/resources</code> folder. These include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>properties_with_labels.txt</p>
<div class="ulist">
<ul>
<li>
<p>List of properties, each line containing information for one property, tab-separated</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Label</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aliases</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Count</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">head of government</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">head of the executive power of this town, city, municipality, state,
 country, or other governmental body</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">government headed by, executive power headed by, president, chancellor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wikibase-item</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">17,592</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>property_blacklist.txt</p>
<div class="ulist">
<ul>
<li>
<p>A list of properties that are filtered when computing the Semantic Signature, one property ID per line,
e.g. <code>P1005</code>, <code>P1014</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>stopwords-en.txt</p>
<div class="ulist">
<ul>
<li>
<p>A list of stopwords, one stopword per line, e.g. <code>i</code>, <code>me</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>wikidata_entity_freqs.map</p>
<div class="ulist">
<ul>
<li>
<p>Each line consists of a the ID of a concept and its frequency in the KB, tab-separated,
e.g. <code>Q4664130  409104, Q30 205747</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_settings_knowledge-base"><a class="anchor" href="#sect_settings_knowledge-base"></a>Knowledge Base Settings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the global settings related to the knowledge base module.</p>
</div>
<div class="paragraph">
<div class="title">Default max results</div>
<p>This parameter determines the default value for the maximum number of results that can be retrieved from a SPARQL query.
The queries are used to retrieve concepts, statements, properties, etc. from the knowledge base.
The maximum number of results can also be configured separately for each knowledge base in the project settings.</p>
</div>
<div class="paragraph">
<div class="title">Hard max results</div>
<p>A hard limit for the <strong>Max results</strong> parameter.</p>
</div>
<div class="paragraph">
<p>If no value for the parameter is specified, its default value is used. The default value is shown as
an example of how the parameter can be configured below:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 27. Knowledge base settings overview</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">knowledge-base.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable/disable KB support</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">knowledge-base.default-max-results</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">default result limit for SPARQL query</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">knowledge-base.hard-max-results</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hard limit for the maximum number of results from a query</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">knowledge-base.cache-size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of items (classes, instances and properties) to cache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">500000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">knowledge-base.cache-expire-delay</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time before items are expunged from the cache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1h</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">knowledge-base.cache-refresh-delay</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time before items are asynchronously refreshed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30m</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">knowledge-base.render-cache-size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of items (classes, instances and properties) to cache during rendering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">knowledge-base.render-cache-expire-delay</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time before items are expunged from the render cache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1h</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">knowledge-base.render-cache-refresh-delay</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time before items are asynchronously refreshed when rendering</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5m</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">knowledge-base.remove-orphans-on-start</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">whether to delete orphaned KBs on start</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Disabling the knowledge base support will lead to the loss of concept linked features from
      documents/projects that were using them. If you wish to run the application without knowledge base
      support, it is strongly recommended to disable the feature immediately after the installation and
      not after any projects have potentially started using it.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_settings_scheduler"><a class="anchor" href="#sect_settings_scheduler"></a>Scheduler Settings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the global settings related to the scheduler.</p>
</div>
<div class="paragraph">
<div class="title">Number of threads</div>
<p>This parameter determines the number of threads the scheduler uses. It should be less than hardware
threads available on the machine that runs INCEpTION. The higher the number, the more tasks can be
run in parallel.</p>
</div>
<div class="paragraph">
<div class="title">Queue size</div>
<p>This parameter determines the maximum number of tasks that can be waiting in the scheduler queue. If
the queue is full, then no new tasks can be scheduled until running tasks are completed.</p>
</div>
<div class="paragraph">
<p>If no value for the parameter is specified, its default value is used. The default value is shown as
an example of how the parameter can be configured below:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 28. Scheduler settings overview</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inception.scheduler.numberOfThreads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of threads that run tasks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inception.scheduler.queueSize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of tasks waiting for execution</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sect_settings_search"><a class="anchor" href="#sect_settings_search"></a>Document Repositories Settings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the global settings related to the external document repository support.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 29. Document repository settings overview</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">external-search.enable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable/disable document repository support</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sect_settings_recommender"><a class="anchor" href="#sect_settings_recommender"></a>Recommender Settings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the global settings related to the recommender module.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 30. Recommender settings overview</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>recommender.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable/disable recommender support</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>recommender.sidebar.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable/disable recommender sidebar on annotation page</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="sect_settings_String_relation_recommender"><a class="anchor" href="#sect_settings_String_relation_recommender"></a>String Matching Recommender for Relations Settings</h3>
<div class="paragraph">
<p>You can enable the String recommender for relations in your INCEpTION instance.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 31. String Matching Relation Recommnder Settings</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">recommender.string-matching.relation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable/disable String relation recommender</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="sect_settings_recommender_external"><a class="anchor" href="#sect_settings_recommender_external"></a>External Recommender Settings</h3>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 32. External recommender settings</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">recommender.external.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable/disable external recommender support</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">recommender.external.connect-timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">duration of connect timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3m</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">recommender.external.read-timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">duration of read timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3m</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sect_settings_bulk_processing"><a class="anchor" href="#sect_settings_bulk_processing"></a>Bulk Processing Settings</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Experimental feature.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>This section describes the global settings related to the bulk processing module.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 33. Recommender settings overview</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bulk-processing.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable/disable bulk processing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sect_settings_sharing"><a class="anchor" href="#sect_settings_sharing"></a>Invite Links Settings</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Experimental feature.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>You can enable invite links for your INCEpTION instance. This will allow project managers to
generate invite links for their project which will expire automatically after one year or at a
chosen date. They can also be deleted or regenerated by the manager. Any user of your instance can
use this invite link to access the project. She will automatically be added to the project with
annotator rights when following it.</p>
</div>
<div class="paragraph">
<p>Optionally, users can be invited using a password-less login. In this mode, the user logging in
simply chooses a login name and a project-bound password-less account for this user is created.
The user can only login to this account via the invite link. When the project is deleted, all the
project-bound accounts are deleted as well. The project-bound accounts internally use a randomized
user ID which allows projects projects with such accounts to be exported and imported into other
instances.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 34. Invite Links settings</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sharing.invites.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable/disable invite links</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sharing.invites.guests-enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable/disable guest annotators</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sharing.invites.invite-base-url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">base URL used to generate invite links, e.g. when running behind a reverse proxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>unset</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://public.mydomain.com/inception" class="bare">https://public.mydomain.com/inception</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sect_settings_versioning"><a class="anchor" href="#sect_settings_versioning"></a>🧪 Versioning Settings</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Experimental feature.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>You can enable versioning for projects in your INCEpTION instance.
Project managers can create snapshots of all documents in the project as well as its layer configuration via the versioning panel.
This is done via a git repository stored in the <code>.inception</code> folder.
This git repository can also be used to push to a remote repository, e.g. saving on Github or Gitlab.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 35. Versioning settings</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>versioning.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable/disable versioning</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sect_settings_websocket"><a class="anchor" href="#sect_settings_websocket"></a>Websocket Settings</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Experimental feature.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>You can enable websocket support for your instance which allows to push messages to the client browser. This can e.g. be information for Admin users on recently logged events.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 36. Websocket settings</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">websocket.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable/disable websocket support/endpoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">websocket.logged-events.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable/disable push messages for logged events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">websocket.recommender-events.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">enable/disable push messages for recommender events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="sect_settings_assistant"><a class="anchor" href="#sect_settings_assistant"></a>🧪 Assistant</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Experimental feature.
</td>
</tr>
</table>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 37. Settings related to the assistant</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to enable the assistant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the Ollama service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="http://localhost:11434" class="bare">http://localhost:11434</a></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>some other URL</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.nickname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The by which the assistant should identify itself.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INCEpTION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Dominick</code></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 38. Settings related to the assistant chat functionality</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.chat.model</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The model to use to drive the chat functionality of the assistant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>llama3.2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mistral-nemo</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.chat.context-length</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The context length supported by the model.
This controls how much chat history will be preserved.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4096</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>16000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.chat.top-p</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controls the diversity of output by sampling tokens from the smallest set whose probabilities sum to the threshold.
Tune the balance between diversity (high, 0.9) and coherence (low, 0.3-0.5).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.90</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.chat.top-k</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controls the number of top-ranked tokens considered for sampling during text generation.
Tune the balance between diversity (high &gt;= 50) and coherence (low e.g. 5).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>25</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>50</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.chat.repeat-penalty</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Discourages the model from repeating the same words or phrases by reducing the probability of tokens already generated, promoting more varied and coherent outputs.
Tune the balance between less repetition (high &gt;= 1.5) and more repetition (low, 1.0).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1.1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1.5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.chat.temperature</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temperature controls the randomness of the model&#8217;s output by adjusting the probability distribution of the next word.
Tune the balance between more randomness (high &gt;= 1.0) and less randomness (low, 0.5).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.8</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.chat.encoding</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The token encoding used by the model.
  The encoding is used to estimate the number of tokens within INCEpTION.
  This can help the application chunk the text more accurately.
  If in doubt, leave the default setting.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cl100k_base</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r50k_base</code>, <code>p50k_base</code>, <code>p50k_edit</code>, <code>cl100k_base</code> or <code>o200k_base</code></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 39. Settings related to the assistant search functionality</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.embedding.model</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The model to use to drive the search functionality of the assistant</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>granite-embedding</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>snowflake-arctic-embed</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.embedding.encoding</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The token encoding used by the model.
  The encoding is used to estimate the number of tokens within INCEpTION.
  This can help the application chunk the text more accurately.
  If in doubt, leave the default setting.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cl100k_base</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>r50k_base</code>, <code>p50k_base</code>, <code>p50k_edit</code>, <code>cl100k_base</code> or <code>o200k_base</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.embedding.dimension</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The dimension of the embedding vectors created by the model.
  If this is set to <code>0</code>, the system will send a request to the LLM service during startup to auto-detect the vector size.
  Setting this manually can be helpful if the LLM service is potentially not available during startup.
  Changing the value will require indexes to be rebuilt.
  It is not recommended to use embeddings with a dimension higher than 1024 as this may result in increased memory usage and reduced performance.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> <code>0</code> (<em>detect automatically</em>)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>256</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.embedding.seed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The random number generator seed used to ensure repeatable retrieval results.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0xDEADBEEF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>12345678</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.embedding.context-length</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The context length supported by the model in LLM tokens.
  This controls how much of a chunk used to calculate the embedding.
  The setting should not be lower than the <code>chunk-size</code> setting.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>768</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>256</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.embedding.batch-size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum of chunks that should be send together to the LLM service when generating embeddings.
  Batching multiple chunks in a single request increases indexing speed.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>16</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>32</code></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 40. Settings related to the assistant search functionality accessing documents in the current project</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.documents.chunk-size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size of a chunk in LLM tokens.
  The setting should not be higher than the <code>assistant.embedding.context-length</code> setting to avoid truncation.
  It can be lower thought to create more topically focused chunks.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>128</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>768</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.documents.max-chunks</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of relevant chunks from the user guide to pass to the LLM service.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.documents.min-score</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum relevance score for chunks to be considered.
  This should be a positive number not larger than <code>1.0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.8</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.documents.idle-eviction-delay</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How often the index pool is checked for idle indexes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5m</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5s</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.documents.min-idle-time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How long an index may remain in the pool before being considered for eviction.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5m</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5s</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.documents.borrow-wait-timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How long to wait for access to an index before timing out.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3m</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>15s</code></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 41. Settings related to the user guide integration</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Setting</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.user-guide.rebuild-index-on-boot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to re-build the user manual index at the start of the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.user-guide.max-chunks</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of relevant chunks from the user guide to pass to the LLM service.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>assistant.user-guide.min-score</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum relevance score for chunks to be considered.
  This should be a positive number not larger than <code>1.0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.8</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.5</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 35.5<br>
Last updated 2025-03-18 16:34:20 +0100
</div>
</div>
</body>
</html>